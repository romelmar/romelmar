{
    "sourceFile": "app/Http/Controllers/DocumentController.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 123,
            "patches": [
                {
                    "date": 1653292587848,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1653292611403,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -123,16 +123,14 @@\n \n         $output = '';\n         if ($docRoutes->count() > 0) {\n             $output .= '<table id=\"myTable\" class=\"table table-striped table-sm text-center align-middle\">\n-            <thead>\n-              <tr>';\n+      ';\n \n             // foreach ($fields as $field) $output .= '<th>' . $field . '</th>';\n \n             $output .= '\n-              </tr>\n-            </thead>\n+\n             <tbody>';\n             foreach ($docRoutes as $docRoute) {\n \n                 $output .= '<tr>\n"
                },
                {
                    "date": 1653292668997,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -123,14 +123,16 @@\n \n         $output = '';\n         if ($docRoutes->count() > 0) {\n             $output .= '<table id=\"myTable\" class=\"table table-striped table-sm text-center align-middle\">\n-      ';\n+            <thead>\n+              <tr><th>...</th>';\n \n             // foreach ($fields as $field) $output .= '<th>' . $field . '</th>';\n \n             $output .= '\n-\n+              </tr>\n+            </thead>\n             <tbody>';\n             foreach ($docRoutes as $docRoute) {\n \n                 $output .= '<tr>\n"
                },
                {
                    "date": 1653292686403,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -126,9 +126,9 @@\n             $output .= '<table id=\"myTable\" class=\"table table-striped table-sm text-center align-middle\">\n             <thead>\n               <tr><th>...</th>';\n \n-            // foreach ($fields as $field) $output .= '<th>' . $field . '</th>';\n+            foreach ($fields as $field) $output .= '<th>' . $field . '</th>';\n \n             $output .= '\n               </tr>\n             </thead>\n"
                },
                {
                    "date": 1653292694627,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -124,9 +124,8 @@\n         $output = '';\n         if ($docRoutes->count() > 0) {\n             $output .= '<table id=\"myTable\" class=\"table table-striped table-sm text-center align-middle\">\n             <thead>\n-              <tr><th>...</th>';\n \n             foreach ($fields as $field) $output .= '<th>' . $field . '</th>';\n \n             $output .= '\n"
                },
                {
                    "date": 1653292722695,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -123,15 +123,16 @@\n \n         $output = '';\n         if ($docRoutes->count() > 0) {\n             $output .= '<table id=\"myTable\" class=\"table table-striped table-sm text-center align-middle\">\n-            <thead>\n+         \n+              <tr>';\n \n             foreach ($fields as $field) $output .= '<th>' . $field . '</th>';\n \n             $output .= '\n               </tr>\n-            </thead>\n+           \n             <tbody>';\n             foreach ($docRoutes as $docRoute) {\n \n                 $output .= '<tr>\n"
                },
                {
                    "date": 1653292729635,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -123,16 +123,16 @@\n \n         $output = '';\n         if ($docRoutes->count() > 0) {\n             $output .= '<table id=\"myTable\" class=\"table table-striped table-sm text-center align-middle\">\n-         \n+            <thead>\n               <tr>';\n \n             foreach ($fields as $field) $output .= '<th>' . $field . '</th>';\n \n             $output .= '\n               </tr>\n-           \n+            </thead>\n             <tbody>';\n             foreach ($docRoutes as $docRoute) {\n \n                 $output .= '<tr>\n"
                },
                {
                    "date": 1653292822128,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -134,18 +134,18 @@\n             </thead>\n             <tbody>';\n             foreach ($docRoutes as $docRoute) {\n \n-                $output .= '<tr>\n-                <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n-                <td><p class=\"title\">' . $docRoute->action . '</p><small>'.$docRoute->created_at->format('m/d/Y').'</small></td>\n+            //     $output .= '<tr>\n+            //     <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n+            //     <td><p class=\"title\">' . $docRoute->action . '</p><small>'.$docRoute->created_at->format('m/d/Y').'</small></td>\n \n-                <td>\n-                        <button type=\"button\" id=\"' . $docRoute->id . '\"  class=\"btn text-success mx-1 editIcon editDoc\"  data-toggle=\"modal\" data-target=\"#editDocumentModal\">\n-                        <i class=\"bi-pencil-square h4\"></i>\n-                        </button>\n-                </td>\n-              </tr>';\n+            //     <td>\n+            //             <button type=\"button\" id=\"' . $docRoute->id . '\"  class=\"btn text-success mx-1 editIcon editDoc\"  data-toggle=\"modal\" data-target=\"#editDocumentModal\">\n+            //             <i class=\"bi-pencil-square h4\"></i>\n+            //             </button>\n+            //     </td>\n+            //   </tr>';\n             }\n             $output .= '</tbody></table>';\n             echo $output;\n         } else {\n"
                },
                {
                    "date": 1653292831725,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -126,9 +126,9 @@\n             $output .= '<table id=\"myTable\" class=\"table table-striped table-sm text-center align-middle\">\n             <thead>\n               <tr>';\n \n-            foreach ($fields as $field) $output .= '<th>' . $field . '</th>';\n+            // foreach ($fields as $field) $output .= '<th>' . $field . '</th>';\n \n             $output .= '\n               </tr>\n             </thead>\n"
                },
                {
                    "date": 1653292888673,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -134,18 +134,18 @@\n             </thead>\n             <tbody>';\n             foreach ($docRoutes as $docRoute) {\n \n-            //     $output .= '<tr>\n-            //     <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n-            //     <td><p class=\"title\">' . $docRoute->action . '</p><small>'.$docRoute->created_at->format('m/d/Y').'</small></td>\n+                $output .= '<tr>\n+                <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n+                <td><p class=\"title\">' . $docRoute->action . '</p><small>'.$docRoute->created_at->format('m/d/Y').'</small></td>\n \n-            //     <td>\n-            //             <button type=\"button\" id=\"' . $docRoute->id . '\"  class=\"btn text-success mx-1 editIcon editDoc\"  data-toggle=\"modal\" data-target=\"#editDocumentModal\">\n-            //             <i class=\"bi-pencil-square h4\"></i>\n-            //             </button>\n-            //     </td>\n-            //   </tr>';\n+                <td>\n+                        <button type=\"button\" id=\"' . $docRoute->id . '\"  class=\"btn text-success mx-1 editIcon editDoc\"  data-toggle=\"modal\" data-target=\"#editDocumentModal\">\n+                        <i class=\"bi-pencil-square h4\"></i>\n+                        </button>\n+                </td>\n+              </tr>';\n             }\n             $output .= '</tbody></table>';\n             echo $output;\n         } else {\n"
                },
                {
                    "date": 1653292912169,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -134,18 +134,19 @@\n             </thead>\n             <tbody>';\n             foreach ($docRoutes as $docRoute) {\n \n-                $output .= '<tr>\n-                <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n-                <td><p class=\"title\">' . $docRoute->action . '</p><small>'.$docRoute->created_at->format('m/d/Y').'</small></td>\n+                $output .= '';\n+            //     $output .= '<tr>\n+            //     <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n+            //     <td><p class=\"title\">' . $docRoute->action . '</p><small>'.$docRoute->created_at->format('m/d/Y').'</small></td>\n \n-                <td>\n-                        <button type=\"button\" id=\"' . $docRoute->id . '\"  class=\"btn text-success mx-1 editIcon editDoc\"  data-toggle=\"modal\" data-target=\"#editDocumentModal\">\n-                        <i class=\"bi-pencil-square h4\"></i>\n-                        </button>\n-                </td>\n-              </tr>';\n+            //     <td>\n+            //             <button type=\"button\" id=\"' . $docRoute->id . '\"  class=\"btn text-success mx-1 editIcon editDoc\"  data-toggle=\"modal\" data-target=\"#editDocumentModal\">\n+            //             <i class=\"bi-pencil-square h4\"></i>\n+            //             </button>\n+            //     </td>\n+            //   </tr>';\n             }\n             $output .= '</tbody></table>';\n             echo $output;\n         } else {\n"
                },
                {
                    "date": 1653292938691,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -134,9 +134,9 @@\n             </thead>\n             <tbody>';\n             foreach ($docRoutes as $docRoute) {\n \n-                $output .= '';\n+                $output .= '<tr><td></td></tr';\n             //     $output .= '<tr>\n             //     <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n             //     <td><p class=\"title\">' . $docRoute->action . '</p><small>'.$docRoute->created_at->format('m/d/Y').'</small></td>\n \n"
                },
                {
                    "date": 1653292962362,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -134,9 +134,9 @@\n             </thead>\n             <tbody>';\n             foreach ($docRoutes as $docRoute) {\n \n-                $output .= '<tr><td></td></tr';\n+                $output .= \"<tr><td></td></tr>\";\n             //     $output .= '<tr>\n             //     <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n             //     <td><p class=\"title\">' . $docRoute->action . '</p><small>'.$docRoute->created_at->format('m/d/Y').'</small></td>\n \n"
                },
                {
                    "date": 1653292976446,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -134,9 +134,9 @@\n             </thead>\n             <tbody>';\n             foreach ($docRoutes as $docRoute) {\n \n-                $output .= \"<tr><td></td></tr>\";\n+                $output .= \"<tr><td>1</td></tr>\";\n             //     $output .= '<tr>\n             //     <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n             //     <td><p class=\"title\">' . $docRoute->action . '</p><small>'.$docRoute->created_at->format('m/d/Y').'</small></td>\n \n"
                },
                {
                    "date": 1653293007535,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -134,9 +134,9 @@\n             </thead>\n             <tbody>';\n             foreach ($docRoutes as $docRoute) {\n \n-                $output .= \"<tr><td>1</td></tr>\";\n+                $output .= \"<tr><td>1</td><td>1</td><td>1</td></tr>\";\n             //     $output .= '<tr>\n             //     <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n             //     <td><p class=\"title\">' . $docRoute->action . '</p><small>'.$docRoute->created_at->format('m/d/Y').'</small></td>\n \n"
                },
                {
                    "date": 1653293109171,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -134,9 +134,9 @@\n             </thead>\n             <tbody>';\n             foreach ($docRoutes as $docRoute) {\n \n-                $output .= \"<tr><td>1</td><td>1</td><td>1</td></tr>\";\n+                $output .= \"<tr><td>1</td><td>1</td><td>1</td><td>1</td></tr>\";\n             //     $output .= '<tr>\n             //     <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n             //     <td><p class=\"title\">' . $docRoute->action . '</p><small>'.$docRoute->created_at->format('m/d/Y').'</small></td>\n \n"
                },
                {
                    "date": 1653293207582,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -126,27 +126,26 @@\n             $output .= '<table id=\"myTable\" class=\"table table-striped table-sm text-center align-middle\">\n             <thead>\n               <tr>';\n \n-            // foreach ($fields as $field) $output .= '<th>' . $field . '</th>';\n+            foreach ($fields as $field) $output .= '<th>' . $field . '</th>';\n \n             $output .= '\n               </tr>\n             </thead>\n             <tbody>';\n             foreach ($docRoutes as $docRoute) {\n \n-                $output .= \"<tr><td>1</td><td>1</td><td>1</td><td>1</td></tr>\";\n-            //     $output .= '<tr>\n-            //     <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n-            //     <td><p class=\"title\">' . $docRoute->action . '</p><small>'.$docRoute->created_at->format('m/d/Y').'</small></td>\n+                $output .= '<tr>\n+                <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n+                <td><p class=\"title\">' . $docRoute->action . '</p><small>'.$docRoute->created_at->format('m/d/Y').'</small></td>\n \n-            //     <td>\n-            //             <button type=\"button\" id=\"' . $docRoute->id . '\"  class=\"btn text-success mx-1 editIcon editDoc\"  data-toggle=\"modal\" data-target=\"#editDocumentModal\">\n-            //             <i class=\"bi-pencil-square h4\"></i>\n-            //             </button>\n-            //     </td>\n-            //   </tr>';\n+                <td>\n+                        <button type=\"button\" id=\"' . $docRoute->id . '\"  class=\"btn text-success mx-1 editIcon editDoc\"  data-toggle=\"modal\" data-target=\"#editDocumentModal\">\n+                        <i class=\"bi-pencil-square h4\"></i>\n+                        </button>\n+                </td>\n+              </tr>';\n             }\n             $output .= '</tbody></table>';\n             echo $output;\n         } else {\n"
                },
                {
                    "date": 1653293282990,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -135,8 +135,9 @@\n             <tbody>';\n             foreach ($docRoutes as $docRoute) {\n \n                 $output .= '<tr>\n+                <td></td>\n                 <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n                 <td><p class=\"title\">' . $docRoute->action . '</p><small>'.$docRoute->created_at->format('m/d/Y').'</small></td>\n \n                 <td>\n"
                },
                {
                    "date": 1653293609434,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -135,9 +135,8 @@\n             <tbody>';\n             foreach ($docRoutes as $docRoute) {\n \n                 $output .= '<tr>\n-                <td></td>\n                 <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n                 <td><p class=\"title\">' . $docRoute->action . '</p><small>'.$docRoute->created_at->format('m/d/Y').'</small></td>\n \n                 <td>\n"
                },
                {
                    "date": 1653293964863,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -134,18 +134,22 @@\n             </thead>\n             <tbody>';\n             foreach ($docRoutes as $docRoute) {\n \n-                $output .= '<tr>\n-                <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n-                <td><p class=\"title\">' . $docRoute->action . '</p><small>'.$docRoute->created_at->format('m/d/Y').'</small></td>\n+                $output =   '<tr>'.\n+                            '<td>'.'</td>'.\n+                            '</tr>';   \n \n-                <td>\n-                        <button type=\"button\" id=\"' . $docRoute->id . '\"  class=\"btn text-success mx-1 editIcon editDoc\"  data-toggle=\"modal\" data-target=\"#editDocumentModal\">\n-                        <i class=\"bi-pencil-square h4\"></i>\n-                        </button>\n-                </td>\n-              </tr>';\n+            //     $output .= '<tr>\n+            //     <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n+            //     <td><p class=\"title\">' . $docRoute->action . '</p><small>'.$docRoute->created_at->format('m/d/Y').'</small></td>\n+\n+            //     <td>\n+            //             <button type=\"button\" id=\"' . $docRoute->id . '\"  class=\"btn text-success mx-1 editIcon editDoc\"  data-toggle=\"modal\" data-target=\"#editDocumentModal\">\n+            //             <i class=\"bi-pencil-square h4\"></i>\n+            //             </button>\n+            //     </td>\n+            //   </tr>';\n             }\n             $output .= '</tbody></table>';\n             echo $output;\n         } else {\n"
                },
                {
                    "date": 1653293977671,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -136,8 +136,10 @@\n             foreach ($docRoutes as $docRoute) {\n \n                 $output =   '<tr>'.\n                             '<td>'.'</td>'.\n+                            '<td>'.'</td>'.\n+                            '<td>'.'</td>'.\n                             '</tr>';   \n \n             //     $output .= '<tr>\n             //     <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n"
                },
                {
                    "date": 1653294003308,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -135,11 +135,11 @@\n             <tbody>';\n             foreach ($docRoutes as $docRoute) {\n \n                 $output =   '<tr>'.\n+                            '<td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small>'.'</td>'.\n                             '<td>'.'</td>'.\n                             '<td>'.'</td>'.\n-                            '<td>'.'</td>'.\n                             '</tr>';   \n \n             //     $output .= '<tr>\n             //     <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n"
                },
                {
                    "date": 1653294023691,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -136,10 +136,10 @@\n             foreach ($docRoutes as $docRoute) {\n \n                 $output =   '<tr>'.\n                             '<td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small>'.'</td>'.\n+                            '<td><p class=\"title\">' . $docRoute->action . '</p><small>'.$docRoute->created_at->format('m/d/Y').'</small>'.'</td>'.\n                             '<td>'.'</td>'.\n-                            '<td>'.'</td>'.\n                             '</tr>';   \n \n             //     $output .= '<tr>\n             //     <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n"
                },
                {
                    "date": 1653294089185,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -113,9 +113,9 @@\n     public function fetchAllRoute()\n     {\n         // $docs = Document::all();\n         $docRoutes = DocRoutes::all();\n-        \n+\n         $fields = [\n             'Division',\n             'Action taken',\n             'Action'\n@@ -134,24 +134,29 @@\n             </thead>\n             <tbody>';\n             foreach ($docRoutes as $docRoute) {\n \n-                $output =   '<tr>'.\n-                            '<td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small>'.'</td>'.\n-                            '<td><p class=\"title\">' . $docRoute->action . '</p><small>'.$docRoute->created_at->format('m/d/Y').'</small>'.'</td>'.\n-                            '<td>'.'</td>'.\n-                            '</tr>';   \n+                $output =   '<tr>' .\n+                    '<td><p class=\"title\">' . $docRoute->division->name . '</p><small>' . $docRoute->employee->fullname() . '</small>' . '</td>' .\n+                    '<td><p class=\"title\">' . $docRoute->action . '</p><small>' . $docRoute->created_at->format('m/d/Y') . '</small>' . '</td>' .\n+                    '<td>' .\n+                    '<button type=\"button\" id=\"' . $docRoute->id . '\"  class=\"btn text-success mx-1 editIcon editDoc\"  data-toggle=\"modal\" data-target=\"#editDocumentModal\">\n+                        <i class=\"bi-pencil-square h4\"></i>\n+                        </button>' .\n \n-            //     $output .= '<tr>\n-            //     <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n-            //     <td><p class=\"title\">' . $docRoute->action . '</p><small>'.$docRoute->created_at->format('m/d/Y').'</small></td>\n+                    '</td>' .\n+                    '</tr>';\n \n-            //     <td>\n-            //             <button type=\"button\" id=\"' . $docRoute->id . '\"  class=\"btn text-success mx-1 editIcon editDoc\"  data-toggle=\"modal\" data-target=\"#editDocumentModal\">\n-            //             <i class=\"bi-pencil-square h4\"></i>\n-            //             </button>\n-            //     </td>\n-            //   </tr>';\n+                //     $output .= '<tr>\n+                //     <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n+                //     <td><p class=\"title\">' . $docRoute->action . '</p><small>'.$docRoute->created_at->format('m/d/Y').'</small></td>\n+\n+                //     <td>\n+                //             <button type=\"button\" id=\"' . $docRoute->id . '\"  class=\"btn text-success mx-1 editIcon editDoc\"  data-toggle=\"modal\" data-target=\"#editDocumentModal\">\n+                //             <i class=\"bi-pencil-square h4\"></i>\n+                //             </button>\n+                //     </td>\n+                //   </tr>';\n             }\n             $output .= '</tbody></table>';\n             echo $output;\n         } else {\n"
                },
                {
                    "date": 1653294148392,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -134,9 +134,9 @@\n             </thead>\n             <tbody>';\n             foreach ($docRoutes as $docRoute) {\n \n-                $output =   '<tr>' .\n+                $output .=   '<tr>' .\n                     '<td><p class=\"title\">' . $docRoute->division->name . '</p><small>' . $docRoute->employee->fullname() . '</small>' . '</td>' .\n                     '<td><p class=\"title\">' . $docRoute->action . '</p><small>' . $docRoute->created_at->format('m/d/Y') . '</small>' . '</td>' .\n                     '<td>' .\n                     '<button type=\"button\" id=\"' . $docRoute->id . '\"  class=\"btn text-success mx-1 editIcon editDoc\"  data-toggle=\"modal\" data-target=\"#editDocumentModal\">\n"
                },
                {
                    "date": 1653294169889,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -113,9 +113,9 @@\n     public function fetchAllRoute()\n     {\n         // $docs = Document::all();\n         $docRoutes = DocRoutes::all();\n-\n+        \n         $fields = [\n             'Division',\n             'Action taken',\n             'Action'\n@@ -134,29 +134,24 @@\n             </thead>\n             <tbody>';\n             foreach ($docRoutes as $docRoute) {\n \n-                $output .=   '<tr>' .\n-                    '<td><p class=\"title\">' . $docRoute->division->name . '</p><small>' . $docRoute->employee->fullname() . '</small>' . '</td>' .\n-                    '<td><p class=\"title\">' . $docRoute->action . '</p><small>' . $docRoute->created_at->format('m/d/Y') . '</small>' . '</td>' .\n-                    '<td>' .\n-                    '<button type=\"button\" id=\"' . $docRoute->id . '\"  class=\"btn text-success mx-1 editIcon editDoc\"  data-toggle=\"modal\" data-target=\"#editDocumentModal\">\n-                        <i class=\"bi-pencil-square h4\"></i>\n-                        </button>' .\n+                $output .=   '<tr>'.\n+                            '<td>'.'</td>'.\n+                            '<td>'.'</td>'.\n+                            '<td>'.'</td>'.\n+                            '</tr>';   \n \n-                    '</td>' .\n-                    '</tr>';\n+            //     $output .= '<tr>\n+            //     <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n+            //     <td><p class=\"title\">' . $docRoute->action . '</p><small>'.$docRoute->created_at->format('m/d/Y').'</small></td>\n \n-                //     $output .= '<tr>\n-                //     <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n-                //     <td><p class=\"title\">' . $docRoute->action . '</p><small>'.$docRoute->created_at->format('m/d/Y').'</small></td>\n-\n-                //     <td>\n-                //             <button type=\"button\" id=\"' . $docRoute->id . '\"  class=\"btn text-success mx-1 editIcon editDoc\"  data-toggle=\"modal\" data-target=\"#editDocumentModal\">\n-                //             <i class=\"bi-pencil-square h4\"></i>\n-                //             </button>\n-                //     </td>\n-                //   </tr>';\n+            //     <td>\n+            //             <button type=\"button\" id=\"' . $docRoute->id . '\"  class=\"btn text-success mx-1 editIcon editDoc\"  data-toggle=\"modal\" data-target=\"#editDocumentModal\">\n+            //             <i class=\"bi-pencil-square h4\"></i>\n+            //             </button>\n+            //     </td>\n+            //   </tr>';\n             }\n             $output .= '</tbody></table>';\n             echo $output;\n         } else {\n"
                },
                {
                    "date": 1653294180653,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -126,9 +126,9 @@\n             $output .= '<table id=\"myTable\" class=\"table table-striped table-sm text-center align-middle\">\n             <thead>\n               <tr>';\n \n-            foreach ($fields as $field) $output .= '<th>' . $field . '</th>';\n+            // foreach ($fields as $field) $output .= '<th>' . $field . '</th>';\n \n             $output .= '\n               </tr>\n             </thead>\n"
                },
                {
                    "date": 1653294264338,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -111,47 +111,49 @@\n     }\n \n     public function fetchAllRoute()\n     {\n-        // $docs = Document::all();\n-        $docRoutes = DocRoutes::all();\n-        \n+        $docs = Document::all();\n+        // dd($docs);\n         $fields = [\n-            'Division',\n-            'Action taken',\n-            'Action'\n+            '#',\n+            'Recieved',\n+            'Subject',\n+            'Deadline',\n+            'Status',\n+            'Updated At',\n+            'Action',\n         ];\n \n         $output = '';\n-        if ($docRoutes->count() > 0) {\n+        if ($docs->count() > 0) {\n             $output .= '<table id=\"myTable\" class=\"table table-striped table-sm text-center align-middle\">\n             <thead>\n               <tr>';\n \n-            // foreach ($fields as $field) $output .= '<th>' . $field . '</th>';\n+            foreach ($fields as $field) $output .= '<th>' . $field . '</th>';\n \n             $output .= '\n               </tr>\n             </thead>\n             <tbody>';\n-            foreach ($docRoutes as $docRoute) {\n-\n-                $output .=   '<tr>'.\n-                            '<td>'.'</td>'.\n-                            '<td>'.'</td>'.\n-                            '<td>'.'</td>'.\n-                            '</tr>';   \n-\n-            //     $output .= '<tr>\n-            //     <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n-            //     <td><p class=\"title\">' . $docRoute->action . '</p><small>'.$docRoute->created_at->format('m/d/Y').'</small></td>\n-\n-            //     <td>\n-            //             <button type=\"button\" id=\"' . $docRoute->id . '\"  class=\"btn text-success mx-1 editIcon editDoc\"  data-toggle=\"modal\" data-target=\"#editDocumentModal\">\n-            //             <i class=\"bi-pencil-square h4\"></i>\n-            //             </button>\n-            //     </td>\n-            //   </tr>';\n+            foreach ($docs as $doc) {\n+                $output .= '<tr>\n+                <td>' . $doc->id . '</td>\n+                <td>' . $doc->date_received . '</td>\n+                <td>' . $doc->subject . '  </td>\n+                <td>' . $doc->deadline . '</td>\n+                <td>' . $doc->get_status() . '</td>\n+                <td>' . $doc->updated_at . '</td>\n+                <td>\n+                        <button type=\"button\" id=\"' . $doc->id . '\"  class=\"btn text-success mx-1 editIcon editDoc\"  data-toggle=\"modal\" data-target=\"#editDocumentModal\">\n+                        <i class=\"bi-pencil-square h4\"></i>\n+                        </button>\n+                        \n+                        \n+                        <a href=\"' . route('documents.show',  $doc->id) . '\" id=\"' . $doc->id . '\" class=\"text-success \"><i class=\"bi-eye h4\"></i></a>\n+                </td>\n+              </tr>';\n             }\n             $output .= '</tbody></table>';\n             echo $output;\n         } else {\n"
                },
                {
                    "date": 1653294302213,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -117,12 +117,9 @@\n         $fields = [\n             '#',\n             'Recieved',\n             'Subject',\n-            'Deadline',\n-            'Status',\n-            'Updated At',\n-            'Action',\n+            \n         ];\n \n         $output = '';\n         if ($docs->count() > 0) {\n@@ -140,11 +137,9 @@\n                 $output .= '<tr>\n                 <td>' . $doc->id . '</td>\n                 <td>' . $doc->date_received . '</td>\n                 <td>' . $doc->subject . '  </td>\n-                <td>' . $doc->deadline . '</td>\n-                <td>' . $doc->get_status() . '</td>\n-                <td>' . $doc->updated_at . '</td>\n+\n                 <td>\n                         <button type=\"button\" id=\"' . $doc->id . '\"  class=\"btn text-success mx-1 editIcon editDoc\"  data-toggle=\"modal\" data-target=\"#editDocumentModal\">\n                         <i class=\"bi-pencil-square h4\"></i>\n                         </button>\n"
                },
                {
                    "date": 1653294343414,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -111,19 +111,19 @@\n     }\n \n     public function fetchAllRoute()\n     {\n-        $docs = Document::all();\n-        // dd($docs);\n+        // $docs = Document::all();\n+        $docRoutes = DocRoutes::all();\n+        \n         $fields = [\n-            '#',\n-            'Recieved',\n-            'Subject',\n-            \n+            'Division',\n+            'Action taken',\n+            'Action'\n         ];\n \n         $output = '';\n-        if ($docs->count() > 0) {\n+        if ($docRoutes->count() > 0) {\n             $output .= '<table id=\"myTable\" class=\"table table-striped table-sm text-center align-middle\">\n             <thead>\n               <tr>';\n \n@@ -132,21 +132,18 @@\n             $output .= '\n               </tr>\n             </thead>\n             <tbody>';\n-            foreach ($docs as $doc) {\n+            foreach ($docRoutes as $docRoute) {\n+\n                 $output .= '<tr>\n-                <td>' . $doc->id . '</td>\n-                <td>' . $doc->date_received . '</td>\n-                <td>' . $doc->subject . '  </td>\n+                <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n+                <td><p class=\"title\">' . $docRoute->action . '</p><small>'.$docRoute->created_at->format('m/d/Y').'</small></td>\n \n                 <td>\n-                        <button type=\"button\" id=\"' . $doc->id . '\"  class=\"btn text-success mx-1 editIcon editDoc\"  data-toggle=\"modal\" data-target=\"#editDocumentModal\">\n+                        <button type=\"button\" id=\"' . $docRoute->id . '\"  class=\"btn text-success mx-1 editIcon editDoc\"  data-toggle=\"modal\" data-target=\"#editDocumentModal\">\n                         <i class=\"bi-pencil-square h4\"></i>\n                         </button>\n-                        \n-                        \n-                        <a href=\"' . route('documents.show',  $doc->id) . '\" id=\"' . $doc->id . '\" class=\"text-success \"><i class=\"bi-eye h4\"></i></a>\n                 </td>\n               </tr>';\n             }\n             $output .= '</tbody></table>';\n"
                },
                {
                    "date": 1653370235373,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n <?php\n \n namespace App\\Http\\Controllers;\n \n-use App\\Models\\DocRoutes;\n+use App\\Models\\DocRoute;\n use App\\Models\\DocStatus;\n use App\\Models\\DocType;\n use App\\Models\\Document;\n use App\\Models\\Employee;\n"
                },
                {
                    "date": 1653370272437,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n <?php\n \n namespace App\\Http\\Controllers;\n \n-use App\\Models\\DocRoute;\n+use App\\Models\\DocRoutes;\n use App\\Models\\DocStatus;\n use App\\Models\\DocType;\n use App\\Models\\Document;\n use App\\Models\\Employee;\n"
                },
                {
                    "date": 1653371925442,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -136,9 +136,9 @@\n             foreach ($docRoutes as $docRoute) {\n \n                 $output .= '<tr>\n                 <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n-                <td><p class=\"title\">' . $docRoute->action . '</p><small>'.$docRoute->created_at->format('m/d/Y').'</small></td>\n+                <td><p class=\"title\">' . $docRoute->created_at->format('m/d/Y') . '</p><small>'.$docRoute->action.'</small></td>\n \n                 <td>\n                         <button type=\"button\" id=\"' . $docRoute->id . '\"  class=\"btn text-success mx-1 editIcon editDoc\"  data-toggle=\"modal\" data-target=\"#editDocumentModal\">\n                         <i class=\"bi-pencil-square h4\"></i>\n"
                },
                {
                    "date": 1653372013524,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -136,9 +136,9 @@\n             foreach ($docRoutes as $docRoute) {\n \n                 $output .= '<tr>\n                 <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n-                <td><p class=\"title\">' . $docRoute->created_at->format('m/d/Y') . '</p><small>'.$docRoute->action.'</small></td>\n+                <td><p class=\"title\">' . $docRoute->date_received->format('m/d/Y') . '</p><small>'.$docRoute->action.'</small></td>\n \n                 <td>\n                         <button type=\"button\" id=\"' . $docRoute->id . '\"  class=\"btn text-success mx-1 editIcon editDoc\"  data-toggle=\"modal\" data-target=\"#editDocumentModal\">\n                         <i class=\"bi-pencil-square h4\"></i>\n"
                },
                {
                    "date": 1653372070743,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -136,9 +136,9 @@\n             foreach ($docRoutes as $docRoute) {\n \n                 $output .= '<tr>\n                 <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n-                <td><p class=\"title\">' . $docRoute->date_received->format('m/d/Y') . '</p><small>'.$docRoute->action.'</small></td>\n+                <td><p class=\"title\">' . $docRoute->date_received. '</p><small>'.$docRoute->action.'</small></td>\n \n                 <td>\n                         <button type=\"button\" id=\"' . $docRoute->id . '\"  class=\"btn text-success mx-1 editIcon editDoc\"  data-toggle=\"modal\" data-target=\"#editDocumentModal\">\n                         <i class=\"bi-pencil-square h4\"></i>\n"
                },
                {
                    "date": 1653373196453,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -136,9 +136,9 @@\n             foreach ($docRoutes as $docRoute) {\n \n                 $output .= '<tr>\n                 <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n-                <td><p class=\"title\">' . $docRoute->date_received. '</p><small>'.$docRoute->action.'</small></td>\n+                <td><small>'.$docRoute->action.'</small><p class=\"title\">' . $docRoute->date_received. '</p></td>\n \n                 <td>\n                         <button type=\"button\" id=\"' . $docRoute->id . '\"  class=\"btn text-success mx-1 editIcon editDoc\"  data-toggle=\"modal\" data-target=\"#editDocumentModal\">\n                         <i class=\"bi-pencil-square h4\"></i>\n"
                },
                {
                    "date": 1653373229253,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -136,9 +136,9 @@\n             foreach ($docRoutes as $docRoute) {\n \n                 $output .= '<tr>\n                 <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n-                <td><small>'.$docRoute->action.'</small><p class=\"title\">' . $docRoute->date_received. '</p></td>\n+                <td><small>'. $docRoute->date_received.'</small><p class=\"title\">' .$docRoute->action. '</p></td>\n \n                 <td>\n                         <button type=\"button\" id=\"' . $docRoute->id . '\"  class=\"btn text-success mx-1 editIcon editDoc\"  data-toggle=\"modal\" data-target=\"#editDocumentModal\">\n                         <i class=\"bi-pencil-square h4\"></i>\n"
                },
                {
                    "date": 1653373440640,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -112,9 +112,9 @@\n \n     public function fetchAllRoute()\n     {\n         // $docs = Document::all();\n-        $docRoutes = DocRoutes::all();\n+        $docRoutes = DocRoutes::where('doc_id', 26)->get();\n         \n         $fields = [\n             'Division',\n             'Action taken',\n"
                },
                {
                    "date": 1653373604704,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -109,12 +109,12 @@\n             echo '<h1 class=\"text-center text-secondary my-5\">No record present in the database!</h1>';\n         }\n     }\n \n-    public function fetchAllRoute()\n+    public function fetchAllRoute(Document $document)\n     {\n         // $docs = Document::all();\n-        $docRoutes = DocRoutes::where('doc_id', 26)->get();\n+        $docRoutes = DocRoutes::where('doc_id', $document->id)->get();\n         \n         $fields = [\n             'Division',\n             'Action taken',\n"
                },
                {
                    "date": 1653373670152,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -112,8 +112,9 @@\n \n     public function fetchAllRoute(Document $document)\n     {\n         // $docs = Document::all();\n+        Log::info($document->id);\n         $docRoutes = DocRoutes::where('doc_id', $document->id)->get();\n         \n         $fields = [\n             'Division',\n"
                },
                {
                    "date": 1653374304066,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -109,12 +109,12 @@\n             echo '<h1 class=\"text-center text-secondary my-5\">No record present in the database!</h1>';\n         }\n     }\n \n-    public function fetchAllRoute(Document $document)\n+    public function fetchAllRoute($doc_id)\n     {\n         // $docs = Document::all();\n-        Log::info($document->id);\n+        Log::info($doc_id);\n         $docRoutes = DocRoutes::where('doc_id', $document->id)->get();\n         \n         $fields = [\n             'Division',\n"
                },
                {
                    "date": 1653374342186,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -113,9 +113,9 @@\n     public function fetchAllRoute($doc_id)\n     {\n         // $docs = Document::all();\n         Log::info($doc_id);\n-        $docRoutes = DocRoutes::where('doc_id', $document->id)->get();\n+        $docRoutes = DocRoutes::where('doc_id', $doc_id)->get();\n         \n         $fields = [\n             'Division',\n             'Action taken',\n"
                },
                {
                    "date": 1653374366915,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -113,9 +113,9 @@\n     public function fetchAllRoute($doc_id)\n     {\n         // $docs = Document::all();\n         Log::info($doc_id);\n-        $docRoutes = DocRoutes::where('doc_id', $doc_id)->get();\n+        $docRoutes = DocRoutes::where('doc_id', 26)->get();\n         \n         $fields = [\n             'Division',\n             'Action taken',\n"
                },
                {
                    "date": 1653374432050,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -109,13 +109,12 @@\n             echo '<h1 class=\"text-center text-secondary my-5\">No record present in the database!</h1>';\n         }\n     }\n \n-    public function fetchAllRoute($doc_id)\n+    public function fetchAllRoute()\n     {\n         // $docs = Document::all();\n-        Log::info($doc_id);\n-        $docRoutes = DocRoutes::where('doc_id', 26)->get();\n+        $docRoutes = DocRoutes::all();\n         \n         $fields = [\n             'Division',\n             'Action taken',\n"
                },
                {
                    "date": 1653374464081,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -111,10 +111,10 @@\n     }\n \n     public function fetchAllRoute()\n     {\n-        // $docs = Document::all();\n-        $docRoutes = DocRoutes::all();\n+        // $docRoutes = DocRoutes::all();\n+        $docRoutes = DocRoutes::where('doc_id',26)->get();\n         \n         $fields = [\n             'Division',\n             'Action taken',\n"
                },
                {
                    "date": 1653374477693,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -109,9 +109,9 @@\n             echo '<h1 class=\"text-center text-secondary my-5\">No record present in the database!</h1>';\n         }\n     }\n \n-    public function fetchAllRoute()\n+    public function fetchAllRoute($doc_id)\n     {\n         // $docRoutes = DocRoutes::all();\n         $docRoutes = DocRoutes::where('doc_id',26)->get();\n         \n"
                },
                {
                    "date": 1653374613829,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -112,9 +112,9 @@\n \n     public function fetchAllRoute($doc_id)\n     {\n         // $docRoutes = DocRoutes::all();\n-        $docRoutes = DocRoutes::where('doc_id',26)->get();\n+        $docRoutes = DocRoutes::where('doc_id',$doc_id)->get();\n         \n         $fields = [\n             'Division',\n             'Action taken',\n"
                },
                {
                    "date": 1653379636778,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -139,9 +139,9 @@\n                 <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n                 <td><small>'. $docRoute->date_received.'</small><p class=\"title\">' .$docRoute->action. '</p></td>\n \n                 <td>\n-                        <button type=\"button\" id=\"' . $docRoute->id . '\"  class=\"btn text-success mx-1 editIcon editDoc\"  data-toggle=\"modal\" data-target=\"#editDocumentModal\">\n+                        <button type=\"button\" id=\"' . $docRoute->id . '\"  class=\"btn text-success mx-1 editIcon editDoc\"  data-toggle=\"modal\" data-target=\"#editRouteModal\">\n                         <i class=\"bi-pencil-square h4\"></i>\n                         </button>\n                 </td>\n               </tr>';\n"
                },
                {
                    "date": 1653379718946,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -479,21 +479,8 @@\n      */\n     public function edit(Request $request)\n     {\n         $input = $request->all();\n-        // $images = Document::find($document->id)->images;\n-\n-\n-        // $today =  Carbon::now('Asia/Manila')->format('Y-m-d');\n-        // $overdues  =  Document::all()->where(\"deadline\", \"<\", $today)->count();\n-        // $dueToday  =  Document::all()->where(\"deadline\", \"==\", $today)->count();\n-        // $recent  =  Document::all()->where(\"deadline\", \">\", $today)->count();\n-\n-        // 'origin_id' => $origin_id,\n-        // 'employee_id' => $employee_id,\n-        // 'mor_id' => $mor_id,\n-        // 'doctype_id' => $doctype_id\n-\n         $where = array('id' => $request->id);\n         $document  = Document::where($where)->first();\n         $origin = Document::find($request->id)->origin_office->name;\n         $focal = Document::find($request->id)->employee->fullname();\n"
                },
                {
                    "date": 1653379724824,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -491,13 +491,8 @@\n         $collection = collect($document[0]);\n \n         $merged = $collection->merge($origin);\n \n-        // $merged->all();\n-\n-        // Log::info( $document );\n-\n-        // return Response::json($document);\n         return response()->json([\n             'status' => 200,\n             $document,\n             'origin' =>  $origin,\n"
                },
                {
                    "date": 1653382391290,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -487,9 +487,9 @@\n         $mor = Document::find($request->id)->meansOfReceiving->name;\n         $doctype = Document::find($request->id)->docType->name;\n \n \n-        $collection = collect($document[0]);\n+        // $collection = collect($document[0]);\n \n         $merged = $collection->merge($origin);\n \n         return response()->json([\n"
                },
                {
                    "date": 1653382408640,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -487,9 +487,9 @@\n         $mor = Document::find($request->id)->meansOfReceiving->name;\n         $doctype = Document::find($request->id)->docType->name;\n \n \n-        // $collection = collect($document[0]);\n+        $collection = collect($document[0]);\n \n         $merged = $collection->merge($origin);\n \n         return response()->json([\n"
                },
                {
                    "date": 1653382433244,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -489,9 +489,9 @@\n \n \n         $collection = collect($document[0]);\n \n-        $merged = $collection->merge($origin);\n+        // $merged = $collection->merge($origin);\n \n         return response()->json([\n             'status' => 200,\n             $document,\n"
                },
                {
                    "date": 1653382446928,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -489,9 +489,9 @@\n \n \n         $collection = collect($document[0]);\n \n-        // $merged = $collection->merge($origin);\n+        $merged = $collection->merge($origin);\n \n         return response()->json([\n             'status' => 200,\n             $document,\n"
                },
                {
                    "date": 1653441199305,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -487,11 +487,11 @@\n         $mor = Document::find($request->id)->meansOfReceiving->name;\n         $doctype = Document::find($request->id)->docType->name;\n \n \n-        $collection = collect($document[0]);\n+        // $collection = collect($document[0]);\n \n-        $merged = $collection->merge($origin);\n+        // $merged = $collection->merge($origin);\n \n         return response()->json([\n             'status' => 200,\n             $document,\n"
                },
                {
                    "date": 1653441229177,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -487,11 +487,11 @@\n         $mor = Document::find($request->id)->meansOfReceiving->name;\n         $doctype = Document::find($request->id)->docType->name;\n \n \n-        // $collection = collect($document[0]);\n+        $collection = collect($document[0]);\n \n-        // $merged = $collection->merge($origin);\n+        $merged = $collection->merge($origin);\n \n         return response()->json([\n             'status' => 200,\n             $document,\n"
                },
                {
                    "date": 1653441336527,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -490,8 +490,9 @@\n \n         $collection = collect($document[0]);\n \n         $merged = $collection->merge($origin);\n+        Log::info($merged);\n \n         return response()->json([\n             'status' => 200,\n             $document,\n"
                },
                {
                    "date": 1653441376355,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -490,9 +490,9 @@\n \n         $collection = collect($document[0]);\n \n         $merged = $collection->merge($origin);\n-        Log::info($merged);\n+        Log::info($collection);\n \n         return response()->json([\n             'status' => 200,\n             $document,\n"
                },
                {
                    "date": 1653441401888,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -490,9 +490,9 @@\n \n         $collection = collect($document[0]);\n \n         $merged = $collection->merge($origin);\n-        Log::info($collection);\n+        Log::info($$document[0]);\n \n         return response()->json([\n             'status' => 200,\n             $document,\n"
                },
                {
                    "date": 1653441435532,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -490,9 +490,9 @@\n \n         $collection = collect($document[0]);\n \n         $merged = $collection->merge($origin);\n-        Log::info($$document[0]);\n+        Log::info($document);\n \n         return response()->json([\n             'status' => 200,\n             $document,\n"
                },
                {
                    "date": 1653448187537,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -536,9 +536,9 @@\n \n         $input = $request->all();\n         Log::info($input);\n \n-        $doc = Document::find($request->id);\n+        $doc = Document::find(5);\n         $input = $request->all();\n         $doc->update($input);\n \n         return response()->json([\n"
                },
                {
                    "date": 1653448400311,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -490,9 +490,8 @@\n \n         $collection = collect($document[0]);\n \n         $merged = $collection->merge($origin);\n-        Log::info($document);\n \n         return response()->json([\n             'status' => 200,\n             $document,\n@@ -536,9 +535,9 @@\n \n         $input = $request->all();\n         Log::info($input);\n \n-        $doc = Document::find(5);\n+        $doc = Document::find($request->id);\n         $input = $request->all();\n         $doc->update($input);\n \n         return response()->json([\n"
                },
                {
                    "date": 1653449594543,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -532,15 +532,20 @@\n      */\n     public function update(Request $request)\n     {\n \n-        $input = $request->all();\n-        Log::info($input);\n+        // $input = $request->all();\n+        // Log::info($input);\n \n-        $doc = Document::find($request->id);\n+        // $doc = Document::find($request->id);\n+        // $input = $request->all();\n+        // $doc->update($input);\n+\n         $input = $request->all();\n-        $doc->update($input);\n+        $inserted = DocRoutes::where('id', $request->id)\n+                    ->update($input);\n \n+\n         return response()->json([\n             'status' => 200,\n         ]);\n     }\n"
                },
                {
                    "date": 1653449634512,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -540,9 +540,9 @@\n         // $input = $request->all();\n         // $doc->update($input);\n \n         $input = $request->all();\n-        $inserted = DocRoutes::where('id', $request->id)\n+        $inserted = Document::where('id', $request->id)\n                     ->update($input);\n \n \n         return response()->json([\n"
                },
                {
                    "date": 1653449819469,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -531,16 +531,8 @@\n      * @return \\Illuminate\\Http\\Response\n      */\n     public function update(Request $request)\n     {\n-\n-        // $input = $request->all();\n-        // Log::info($input);\n-\n-        // $doc = Document::find($request->id);\n-        // $input = $request->all();\n-        // $doc->update($input);\n-\n         $input = $request->all();\n         $inserted = Document::where('id', $request->id)\n                     ->update($input);\n \n"
                },
                {
                    "date": 1653450745028,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -524,9 +524,9 @@\n     }\n \n     /**\n      * Update the specified resource in storage.\n-     *\n+     * \n      * @param  \\Illuminate\\Http\\Request  $request\n      * @param  \\App\\Models\\Document  $document\n      * @return \\Illuminate\\Http\\Response\n      */\n@@ -535,9 +535,8 @@\n         $input = $request->all();\n         $inserted = Document::where('id', $request->id)\n                     ->update($input);\n \n-\n         return response()->json([\n             'status' => 200,\n         ]);\n     }\n"
                },
                {
                    "date": 1653451340796,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -503,13 +503,10 @@\n     }\n \n     public function edit_OLD(Document $document)\n     {\n-\n-        // dd( $document->id);\n         $images = Document::find($document->id)->images;\n \n-\n         $today =  Carbon::now('Asia/Manila')->format('Y-m-d');\n         $overdues  =  Document::all()->where(\"deadline\", \"<\", $today)->count();\n         $dueToday  =  Document::all()->where(\"deadline\", \"==\", $today)->count();\n         $recent  =  Document::all()->where(\"deadline\", \">\", $today)->count();\n"
                },
                {
                    "date": 1653462016538,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -286,9 +286,8 @@\n \n                 $employee_id  = $employee->id;\n             }\n \n-\n             $document = new Document;\n             $document->origin_id = $origin_id;\n             $document->mor_id = $mor_id;\n             $document->doctype_id  = $doctype_id;\n"
                },
                {
                    "date": 1653462067329,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -500,26 +500,9 @@\n             'doctype' =>  $doctype,\n         ]);\n     }\n \n-    public function edit_OLD(Document $document)\n-    {\n-        $images = Document::find($document->id)->images;\n \n-        $today =  Carbon::now('Asia/Manila')->format('Y-m-d');\n-        $overdues  =  Document::all()->where(\"deadline\", \"<\", $today)->count();\n-        $dueToday  =  Document::all()->where(\"deadline\", \"==\", $today)->count();\n-        $recent  =  Document::all()->where(\"deadline\", \">\", $today)->count();\n-\n-        return view('documents.edit', compact(\n-            'document',\n-            'images',\n-            'overdues',\n-            'dueToday',\n-            'recent'\n-        ));\n-    }\n-\n     /**\n      * Update the specified resource in storage.\n      * \n      * @param  \\Illuminate\\Http\\Request  $request\n"
                },
                {
                    "date": 1653462188067,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -511,8 +511,56 @@\n      */\n     public function update(Request $request)\n     {\n         $input = $request->all();\n+        if ($request->origin_id === null) {\n+            $origin = OriginOffice::create(\n+                [\n+                    'name' => $request->origin,\n+                ]\n+            );\n+            $origin_id  = $origin->id;\n+        }\n+\n+        if ($request->mor_id === null) {\n+            $mor = MeansOfReceiving::create(\n+                [\n+                    'name' => $request->mor,\n+                ]\n+            );\n+            $mor_id  = $mor->id;\n+        }\n+\n+        if ($request->doctype_id === null) {\n+            $doctype = DocType::create(\n+                [\n+                    'name' => $request->doctype,\n+                ]\n+            );\n+            $doctype_id  = $doctype->id;\n+        }\n+\n+        if ($request->employee_id === null) {\n+\n+            $firstname = \"\";\n+\n+            $name = explode(\" \", $request->focal);\n+            $last_id = array_key_last($name);\n+\n+            for ($i = 0; $i < ($last_id); $i++) $firstname .= \" \" . $name[$i];\n+\n+            $lastname = $name[$last_id];\n+\n+            $employee = Employee::create(\n+                [\n+                    'firstname' => $firstname,\n+                    'lastname' => $lastname,\n+                ]\n+            );\n+\n+            $employee_id  = $employee->id;\n+        }\n+\n         $inserted = Document::where('id', $request->id)\n                     ->update($input);\n \n         return response()->json([\n"
                },
                {
                    "date": 1653464214795,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -112,10 +112,10 @@\n \n     public function fetchAllRoute($doc_id)\n     {\n         // $docRoutes = DocRoutes::all();\n-        $docRoutes = DocRoutes::where('doc_id',$doc_id)->get();\n-        \n+        $docRoutes = DocRoutes::where('doc_id', $doc_id)->get();\n+\n         $fields = [\n             'Division',\n             'Action taken',\n             'Action'\n@@ -135,10 +135,10 @@\n             <tbody>';\n             foreach ($docRoutes as $docRoute) {\n \n                 $output .= '<tr>\n-                <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n-                <td><small>'. $docRoute->date_received.'</small><p class=\"title\">' .$docRoute->action. '</p></td>\n+                <td><p class=\"title\">' . $docRoute->division->name . '</p><small>' . $docRoute->employee->fullname() . '</small></td>\n+                <td><small>' . $docRoute->date_received . '</small><p class=\"title\">' . $docRoute->action . '</p></td>\n \n                 <td>\n                         <button type=\"button\" id=\"' . $docRoute->id . '\"  class=\"btn text-success mx-1 editIcon editDoc\"  data-toggle=\"modal\" data-target=\"#editRouteModal\">\n                         <i class=\"bi-pencil-square h4\"></i>\n@@ -325,8 +325,14 @@\n                     'useExec' => true,  // May help on Windows systems if execution fails\n                 ]\n             );\n \n+            // ----- get data -----------------------\n+            $data = $pdf->getData();\n+            if ($data === false) {\n+                $error = $pdf->getError();\n+            }\n+\n             $password = '123456';\n             $userPassword = '123456b';\n \n             $result = $pdf\n@@ -560,9 +566,9 @@\n             $employee_id  = $employee->id;\n         }\n \n         $inserted = Document::where('id', $request->id)\n-                    ->update($input);\n+            ->update($input);\n \n         return response()->json([\n             'status' => 200,\n         ]);\n"
                },
                {
                    "date": 1653464244024,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -342,8 +342,9 @@\n                 ->passwordEncryption(128)\n                 ->saveAs($targetPath);\n \n             $imageUpload->image_path = $imageName;\n+            $imageUpload->content = $data;\n             $imageUpload->save();\n             return response()->json(\n                 [\n                     'status' => \"success\",\n"
                },
                {
                    "date": 1653464587484,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -307,9 +307,9 @@\n     }\n \n     public function storeFile(Request $request)\n     {\n-\n+        \n         if ($request->file('file')) {\n             $imageUpload = new Images;\n             $imageUpload->document_id =  $request->document_id;\n             $image = $request->file('file');\n"
                },
                {
                    "date": 1653464843988,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -66,8 +66,9 @@\n         $fields = [\n             '#',\n             'Recieved',\n             'Subject',\n+            'Content',\n             'Deadline',\n             'Status',\n             'Updated At',\n             'Action',\n@@ -89,8 +90,9 @@\n                 $output .= '<tr>\n                 <td>' . $doc->id . '</td>\n                 <td>' . $doc->date_received . '</td>\n                 <td>' . $doc->subject . '  </td>\n+                <td>' . $doc->images->content . '  </td>\n                 <td>' . $doc->deadline . '</td>\n                 <td>' . $doc->get_status() . '</td>\n                 <td>' . $doc->updated_at . '</td>\n                 <td>\n"
                },
                {
                    "date": 1653464910366,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -90,9 +90,9 @@\n                 $output .= '<tr>\n                 <td>' . $doc->id . '</td>\n                 <td>' . $doc->date_received . '</td>\n                 <td>' . $doc->subject . '  </td>\n-                <td>' . $doc->images->content . '  </td>\n+                // <td>' . $doc->imag . '  </td>\n                 <td>' . $doc->deadline . '</td>\n                 <td>' . $doc->get_status() . '</td>\n                 <td>' . $doc->updated_at . '</td>\n                 <td>\n"
                },
                {
                    "date": 1653465005172,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -90,9 +90,9 @@\n                 $output .= '<tr>\n                 <td>' . $doc->id . '</td>\n                 <td>' . $doc->date_received . '</td>\n                 <td>' . $doc->subject . '  </td>\n-                // <td>' . $doc->imag . '  </td>\n+                <td>' . $doc->images->content. '  </td>\n                 <td>' . $doc->deadline . '</td>\n                 <td>' . $doc->get_status() . '</td>\n                 <td>' . $doc->updated_at . '</td>\n                 <td>\n"
                },
                {
                    "date": 1653465778892,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -90,9 +90,9 @@\n                 $output .= '<tr>\n                 <td>' . $doc->id . '</td>\n                 <td>' . $doc->date_received . '</td>\n                 <td>' . $doc->subject . '  </td>\n-                <td>' . $doc->images->content. '  </td>\n+                <td>' . $doc->images[0]->content. '  </td>\n                 <td>' . $doc->deadline . '</td>\n                 <td>' . $doc->get_status() . '</td>\n                 <td>' . $doc->updated_at . '</td>\n                 <td>\n"
                },
                {
                    "date": 1653467106957,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -90,9 +90,9 @@\n                 $output .= '<tr>\n                 <td>' . $doc->id . '</td>\n                 <td>' . $doc->date_received . '</td>\n                 <td>' . $doc->subject . '  </td>\n-                <td>' . $doc->images[0]->content. '  </td>\n+                <td>' . '  </td>\n                 <td>' . $doc->deadline . '</td>\n                 <td>' . $doc->get_status() . '</td>\n                 <td>' . $doc->updated_at . '</td>\n                 <td>\n"
                },
                {
                    "date": 1653529099849,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -114,9 +114,9 @@\n \n     public function fetchAllRoute($doc_id)\n     {\n         // $docRoutes = DocRoutes::all();\n-        $docRoutes = DocRoutes::where('doc_id', $doc_id)->get();\n+        $docRoutes = DocRoutes::where('doc_id',$doc_id)->get();\n \n         $fields = [\n             'Division',\n             'Action taken',\n@@ -137,10 +137,10 @@\n             <tbody>';\n             foreach ($docRoutes as $docRoute) {\n \n                 $output .= '<tr>\n-                <td><p class=\"title\">' . $docRoute->division->name . '</p><small>' . $docRoute->employee->fullname() . '</small></td>\n-                <td><small>' . $docRoute->date_received . '</small><p class=\"title\">' . $docRoute->action . '</p></td>\n+                <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n+                <td><small>'. $docRoute->date_received.'</small><p class=\"title\">' .$docRoute->action. '</p></td>\n \n                 <td>\n                         <button type=\"button\" id=\"' . $docRoute->id . '\"  class=\"btn text-success mx-1 editIcon editDoc\"  data-toggle=\"modal\" data-target=\"#editRouteModal\">\n                         <i class=\"bi-pencil-square h4\"></i>\n@@ -328,12 +328,12 @@\n                 ]\n             );\n \n             // ----- get data -----------------------\n-            $data = $pdf->getData();\n-            if ($data === false) {\n-                $error = $pdf->getError();\n-            }\n+            // $data = $pdf->getData();\n+            // if ($data === false) {\n+            //     $error = $pdf->getError();\n+            // }\n \n             $password = '123456';\n             $userPassword = '123456b';\n \n@@ -520,56 +520,9 @@\n      */\n     public function update(Request $request)\n     {\n         $input = $request->all();\n-        if ($request->origin_id === null) {\n-            $origin = OriginOffice::create(\n-                [\n-                    'name' => $request->origin,\n-                ]\n-            );\n-            $origin_id  = $origin->id;\n-        }\n-\n-        if ($request->mor_id === null) {\n-            $mor = MeansOfReceiving::create(\n-                [\n-                    'name' => $request->mor,\n-                ]\n-            );\n-            $mor_id  = $mor->id;\n-        }\n-\n-        if ($request->doctype_id === null) {\n-            $doctype = DocType::create(\n-                [\n-                    'name' => $request->doctype,\n-                ]\n-            );\n-            $doctype_id  = $doctype->id;\n-        }\n-\n-        if ($request->employee_id === null) {\n-\n-            $firstname = \"\";\n-\n-            $name = explode(\" \", $request->focal);\n-            $last_id = array_key_last($name);\n-\n-            for ($i = 0; $i < ($last_id); $i++) $firstname .= \" \" . $name[$i];\n-\n-            $lastname = $name[$last_id];\n-\n-            $employee = Employee::create(\n-                [\n-                    'firstname' => $firstname,\n-                    'lastname' => $lastname,\n-                ]\n-            );\n-\n-            $employee_id  = $employee->id;\n-        }\n-\n+        \n         $inserted = Document::where('id', $request->id)\n             ->update($input);\n \n         return response()->json([\n"
                },
                {
                    "date": 1653529190236,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -344,9 +344,9 @@\n                 ->passwordEncryption(128)\n                 ->saveAs($targetPath);\n \n             $imageUpload->image_path = $imageName;\n-            $imageUpload->content = $data;\n+            // $imageUpload->content = $data;\n             $imageUpload->save();\n             return response()->json(\n                 [\n                     'status' => \"success\",\n"
                },
                {
                    "date": 1653533102000,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,8 +26,9 @@\n \n \n use Illuminate\\Support\\Facades\\Storage;\n use mikehaertl\\pdftk\\Pdf;\n+u\n \n class DocumentController extends Controller\n {\n     /**\n"
                },
                {
                    "date": 1653534175389,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,9 +26,8 @@\n \n \n use Illuminate\\Support\\Facades\\Storage;\n use mikehaertl\\pdftk\\Pdf;\n-u\n \n class DocumentController extends Controller\n {\n     /**\n@@ -329,12 +328,12 @@\n                 ]\n             );\n \n             // ----- get data -----------------------\n-            // $data = $pdf->getData();\n-            // if ($data === false) {\n-            //     $error = $pdf->getError();\n-            // }\n+            $data = $pdf->getData();\n+            if ($data === false) {\n+                $error = $pdf->getError();\n+            }\n \n             $password = '123456';\n             $userPassword = '123456b';\n \n@@ -345,9 +344,9 @@\n                 ->passwordEncryption(128)\n                 ->saveAs($targetPath);\n \n             $imageUpload->image_path = $imageName;\n-            // $imageUpload->content = $data;\n+            $imageUpload->content = $data;\n             $imageUpload->save();\n             return response()->json(\n                 [\n                     'status' => \"success\",\n"
                },
                {
                    "date": 1653534347481,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -328,12 +328,12 @@\n                 ]\n             );\n \n             // ----- get data -----------------------\n-            $data = $pdf->getData();\n-            if ($data === false) {\n-                $error = $pdf->getError();\n-            }\n+            // $data = $pdf->getData();\n+            // if ($data === false) {\n+            //     $error = $pdf->getError();\n+            // }\n \n             $password = '123456';\n             $userPassword = '123456b';\n \n"
                },
                {
                    "date": 1653534365231,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -328,8 +328,9 @@\n                 ]\n             );\n \n             // ----- get data -----------------------\n+            $data =\"hello wordl\";\n             // $data = $pdf->getData();\n             // if ($data === false) {\n             //     $error = $pdf->getError();\n             // }\n"
                },
                {
                    "date": 1653534523524,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -327,15 +327,10 @@\n                     'useExec' => true,  // May help on Windows systems if execution fails\n                 ]\n             );\n \n-            // ----- get data -----------------------\n-            $data =\"hello wordl\";\n-            // $data = $pdf->getData();\n-            // if ($data === false) {\n-            //     $error = $pdf->getError();\n-            // }\n \n+\n             $password = '123456';\n             $userPassword = '123456b';\n \n             $result = $pdf\n@@ -344,8 +339,14 @@\n                 ->setUserPassword($userPassword)\n                 ->passwordEncryption(128)\n                 ->saveAs($targetPath);\n \n+            // ----- get data -----------------------\n+            $data = $pdf->getData();\n+            if ($data === false) {\n+                $error = $pdf->getError();\n+            }\n+\n             $imageUpload->image_path = $imageName;\n             $imageUpload->content = $data;\n             $imageUpload->save();\n             return response()->json(\n"
                },
                {
                    "date": 1653534909598,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -114,9 +114,9 @@\n \n     public function fetchAllRoute($doc_id)\n     {\n         // $docRoutes = DocRoutes::all();\n-        $docRoutes = DocRoutes::where('doc_id',$doc_id)->get();\n+        $docRoutes = DocRoutes::where('doc_id', $doc_id)->get();\n \n         $fields = [\n             'Division',\n             'Action taken',\n@@ -137,10 +137,10 @@\n             <tbody>';\n             foreach ($docRoutes as $docRoute) {\n \n                 $output .= '<tr>\n-                <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n-                <td><small>'. $docRoute->date_received.'</small><p class=\"title\">' .$docRoute->action. '</p></td>\n+                <td><p class=\"title\">' . $docRoute->division->name . '</p><small>' . $docRoute->employee->fullname() . '</small></td>\n+                <td><small>' . $docRoute->date_received . '</small><p class=\"title\">' . $docRoute->action . '</p></td>\n \n                 <td>\n                         <button type=\"button\" id=\"' . $docRoute->id . '\"  class=\"btn text-success mx-1 editIcon editDoc\"  data-toggle=\"modal\" data-target=\"#editRouteModal\">\n                         <i class=\"bi-pencil-square h4\"></i>\n@@ -309,9 +309,9 @@\n     }\n \n     public function storeFile(Request $request)\n     {\n-        \n+\n         if ($request->file('file')) {\n             $imageUpload = new Images;\n             $imageUpload->document_id =  $request->document_id;\n             $image = $request->file('file');\n@@ -319,8 +319,16 @@\n \n             $targetPath = $request->file('file')->storeAs('images', $imageName);\n             $targetPath = storage_path('app/images/') . $imageName;\n \n+            // ----- get data -----------------------\n+\n+            $pdf_data = new Pdf($targetPath);\n+            $data = $pdf_data->getData();\n+            if ($data === false) {\n+                $error = $pdf_data->getError();\n+            }\n+\n             $pdf = new Pdf(\n                 $targetPath,\n                 [\n                     'command' => 'C:\\Program Files (x86)\\PDFtk\\bin\\pdftk.exe',\n@@ -339,14 +347,8 @@\n                 ->setUserPassword($userPassword)\n                 ->passwordEncryption(128)\n                 ->saveAs($targetPath);\n \n-            // ----- get data -----------------------\n-            $data = $pdf->getData();\n-            if ($data === false) {\n-                $error = $pdf->getError();\n-            }\n-\n             $imageUpload->image_path = $imageName;\n             $imageUpload->content = $data;\n             $imageUpload->save();\n             return response()->json(\n@@ -522,9 +524,9 @@\n      */\n     public function update(Request $request)\n     {\n         $input = $request->all();\n-        \n+\n         $inserted = Document::where('id', $request->id)\n             ->update($input);\n \n         return response()->json([\n"
                },
                {
                    "date": 1653535625378,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -321,9 +321,15 @@\n             $targetPath = storage_path('app/images/') . $imageName;\n \n             // ----- get data -----------------------\n \n-            $pdf_data = new Pdf($targetPath);\n+            $pdf_data = new Pdf(\n+                $targetPath,\n+                [\n+                    'command' => 'C:\\Program Files (x86)\\PDFtk\\bin\\pdftk.exe',\n+                    'useExec' => true,  // May help on Windows systems if execution fails\n+                ]\n+            );\n             $data = $pdf_data->getData();\n             if ($data === false) {\n                 $error = $pdf_data->getError();\n             }\n"
                },
                {
                    "date": 1653535741466,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -321,15 +321,9 @@\n             $targetPath = storage_path('app/images/') . $imageName;\n \n             // ----- get data -----------------------\n \n-            $pdf_data = new Pdf(\n-                $targetPath,\n-                [\n-                    'command' => 'C:\\Program Files (x86)\\PDFtk\\bin\\pdftk.exe',\n-                    'useExec' => true,  // May help on Windows systems if execution fails\n-                ]\n-            );\n+            $pdf_data = new Pdf($targetPath);\n             $data = $pdf_data->getData();\n             if ($data === false) {\n                 $error = $pdf_data->getError();\n             }\n"
                },
                {
                    "date": 1653536106634,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -321,9 +321,15 @@\n             $targetPath = storage_path('app/images/') . $imageName;\n \n             // ----- get data -----------------------\n \n-            $pdf_data = new Pdf($targetPath);\n+            $pdf_data = new Pdf(\n+                $targetPath,\n+                [\n+                    'command' => 'C:\\Program Files (x86)\\PDFtk\\bin\\pdftk.exe',\n+                    'useExec' => true,  // May help on Windows systems if execution fails\n+                ]\n+            );\n             $data = $pdf_data->getData();\n             if ($data === false) {\n                 $error = $pdf_data->getError();\n             }\n"
                },
                {
                    "date": 1653536114933,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -328,9 +328,11 @@\n                     'command' => 'C:\\Program Files (x86)\\PDFtk\\bin\\pdftk.exe',\n                     'useExec' => true,  // May help on Windows systems if execution fails\n                 ]\n             );\n+\n             $data = $pdf_data->getData();\n+            \n             if ($data === false) {\n                 $error = $pdf_data->getError();\n             }\n \n"
                },
                {
                    "date": 1653536226368,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -330,9 +330,9 @@\n                 ]\n             );\n \n             $data = $pdf_data->getData();\n-            \n+\n             if ($data === false) {\n                 $error = $pdf_data->getError();\n             }\n \n@@ -348,14 +348,14 @@\n \n             $password = '123456';\n             $userPassword = '123456b';\n \n-            $result = $pdf\n-                ->allow('AllFeatures')\n-                ->setPassword($password)\n-                ->setUserPassword($userPassword)\n-                ->passwordEncryption(128)\n-                ->saveAs($targetPath);\n+            // $result = $pdf\n+            //     ->allow('AllFeatures')\n+            //     ->setPassword($password)\n+            //     ->setUserPassword($userPassword)\n+            //     ->passwordEncryption(128)\n+            //     ->saveAs($targetPath);\n \n             $imageUpload->image_path = $imageName;\n             $imageUpload->content = $data;\n             $imageUpload->save();\n"
                },
                {
                    "date": 1653536642068,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -329,14 +329,21 @@\n                     'useExec' => true,  // May help on Windows systems if execution fails\n                 ]\n             );\n \n-            $data = $pdf_data->getData();\n \n+            $data = $pdf_data->getDataFields();\n             if ($data === false) {\n                 $error = $pdf_data->getError();\n             }\n \n+            $txt = (string) $data;\n+            $txt = $data->__toString();\n+\n+            $data = $txt;\n+\n+\n+\n             $pdf = new Pdf(\n                 $targetPath,\n                 [\n                     'command' => 'C:\\Program Files (x86)\\PDFtk\\bin\\pdftk.exe',\n"
                },
                {
                    "date": 1653536793750,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -329,21 +329,14 @@\n                     'useExec' => true,  // May help on Windows systems if execution fails\n                 ]\n             );\n \n+            $data = $pdf_data->getData();\n \n-            $data = $pdf_data->getDataFields();\n             if ($data === false) {\n                 $error = $pdf_data->getError();\n             }\n \n-            $txt = (string) $data;\n-            $txt = $data->__toString();\n-\n-            $data = $txt;\n-\n-\n-\n             $pdf = new Pdf(\n                 $targetPath,\n                 [\n                     'command' => 'C:\\Program Files (x86)\\PDFtk\\bin\\pdftk.exe',\n"
                },
                {
                    "date": 1653537194918,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -114,9 +114,9 @@\n \n     public function fetchAllRoute($doc_id)\n     {\n         // $docRoutes = DocRoutes::all();\n-        $docRoutes = DocRoutes::where('doc_id', $doc_id)->get();\n+        $docRoutes = DocRoutes::where('doc_id',$doc_id)->get();\n \n         $fields = [\n             'Division',\n             'Action taken',\n@@ -137,10 +137,10 @@\n             <tbody>';\n             foreach ($docRoutes as $docRoute) {\n \n                 $output .= '<tr>\n-                <td><p class=\"title\">' . $docRoute->division->name . '</p><small>' . $docRoute->employee->fullname() . '</small></td>\n-                <td><small>' . $docRoute->date_received . '</small><p class=\"title\">' . $docRoute->action . '</p></td>\n+                <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n+                <td><small>'. $docRoute->date_received.'</small><p class=\"title\">' .$docRoute->action. '</p></td>\n \n                 <td>\n                         <button type=\"button\" id=\"' . $docRoute->id . '\"  class=\"btn text-success mx-1 editIcon editDoc\"  data-toggle=\"modal\" data-target=\"#editRouteModal\">\n                         <i class=\"bi-pencil-square h4\"></i>\n@@ -309,9 +309,9 @@\n     }\n \n     public function storeFile(Request $request)\n     {\n-\n+        \n         if ($request->file('file')) {\n             $imageUpload = new Images;\n             $imageUpload->document_id =  $request->document_id;\n             $image = $request->file('file');\n@@ -319,43 +319,31 @@\n \n             $targetPath = $request->file('file')->storeAs('images', $imageName);\n             $targetPath = storage_path('app/images/') . $imageName;\n \n-            // ----- get data -----------------------\n-\n-            $pdf_data = new Pdf(\n+            $pdf = new Pdf(\n                 $targetPath,\n                 [\n                     'command' => 'C:\\Program Files (x86)\\PDFtk\\bin\\pdftk.exe',\n                     'useExec' => true,  // May help on Windows systems if execution fails\n                 ]\n             );\n \n-            $data = $pdf_data->getData();\n-\n+            // ----- get data -----------------------\n+            $data = $pdf->getData();\n             if ($data === false) {\n-                $error = $pdf_data->getError();\n+                $error = $pdf->getError();\n             }\n \n-            $pdf = new Pdf(\n-                $targetPath,\n-                [\n-                    'command' => 'C:\\Program Files (x86)\\PDFtk\\bin\\pdftk.exe',\n-                    'useExec' => true,  // May help on Windows systems if execution fails\n-                ]\n-            );\n-\n-\n-\n             $password = '123456';\n             $userPassword = '123456b';\n \n-            // $result = $pdf\n-            //     ->allow('AllFeatures')\n-            //     ->setPassword($password)\n-            //     ->setUserPassword($userPassword)\n-            //     ->passwordEncryption(128)\n-            //     ->saveAs($targetPath);\n+            $result = $pdf\n+                ->allow('AllFeatures')\n+                ->setPassword($password)\n+                ->setUserPassword($userPassword)\n+                ->passwordEncryption(128)\n+                ->saveAs($targetPath);\n \n             $imageUpload->image_path = $imageName;\n             $imageUpload->content = $data;\n             $imageUpload->save();\n@@ -532,9 +520,9 @@\n      */\n     public function update(Request $request)\n     {\n         $input = $request->all();\n-\n+        \n         $inserted = Document::where('id', $request->id)\n             ->update($input);\n \n         return response()->json([\n"
                },
                {
                    "date": 1653537802520,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -328,12 +328,12 @@\n                 ]\n             );\n \n             // ----- get data -----------------------\n-            $data = $pdf->getData();\n-            if ($data === false) {\n-                $error = $pdf->getError();\n-            }\n+            // $data = $pdf->getData();\n+            // if ($data === false) {\n+            //     $error = $pdf->getError();\n+            // }\n \n             $password = '123456';\n             $userPassword = '123456b';\n \n"
                },
                {
                    "date": 1653537826049,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -328,8 +328,9 @@\n                 ]\n             );\n \n             // ----- get data -----------------------\n+            $data =\"\";\n             // $data = $pdf->getData();\n             // if ($data === false) {\n             //     $error = $pdf->getError();\n             // }\n"
                },
                {
                    "date": 1653541817369,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,8 +26,9 @@\n \n \n use Illuminate\\Support\\Facades\\Storage;\n use mikehaertl\\pdftk\\Pdf;\n+use Spatie\\PdfToText\\PdfToText;\n \n class DocumentController extends Controller\n {\n     /**\n"
                },
                {
                    "date": 1653541909667,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -319,8 +319,9 @@\n             $imageName = $image->getClientOriginalName();\n \n             $targetPath = $request->file('file')->storeAs('images', $imageName);\n             $targetPath = storage_path('app/images/') . $imageName;\n+            echo PdfToText::getText(targetPath);\n \n             $pdf = new Pdf(\n                 $targetPath,\n                 [\n"
                },
                {
                    "date": 1653541935592,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -319,9 +319,9 @@\n             $imageName = $image->getClientOriginalName();\n \n             $targetPath = $request->file('file')->storeAs('images', $imageName);\n             $targetPath = storage_path('app/images/') . $imageName;\n-            echo PdfToText::getText(targetPath);\n+            Log::info(PdfToText::getText($targetPath));\n \n             $pdf = new Pdf(\n                 $targetPath,\n                 [\n"
                },
                {
                    "date": 1653542133876,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,9 +26,9 @@\n \n \n use Illuminate\\Support\\Facades\\Storage;\n use mikehaertl\\pdftk\\Pdf;\n-use Spatie\\PdfToText\\PdfToText;\n+use Spatie\\PdfToText\\Pdf as pdfToText;\n \n class DocumentController extends Controller\n {\n     /**\n"
                },
                {
                    "date": 1653542149721,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -319,9 +319,9 @@\n             $imageName = $image->getClientOriginalName();\n \n             $targetPath = $request->file('file')->storeAs('images', $imageName);\n             $targetPath = storage_path('app/images/') . $imageName;\n-            Log::info(PdfToText::getText($targetPath));\n+            Log::info(pdfToText::getText($targetPath));\n \n             $pdf = new Pdf(\n                 $targetPath,\n                 [\n"
                },
                {
                    "date": 1653542263966,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -26,9 +26,8 @@\n \n \n use Illuminate\\Support\\Facades\\Storage;\n use mikehaertl\\pdftk\\Pdf;\n-use Spatie\\PdfToText\\Pdf as pdfToText;\n \n class DocumentController extends Controller\n {\n     /**\n@@ -319,9 +318,8 @@\n             $imageName = $image->getClientOriginalName();\n \n             $targetPath = $request->file('file')->storeAs('images', $imageName);\n             $targetPath = storage_path('app/images/') . $imageName;\n-            Log::info(pdfToText::getText($targetPath));\n \n             $pdf = new Pdf(\n                 $targetPath,\n                 [\n"
                },
                {
                    "date": 1653543050182,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -329,12 +329,12 @@\n             );\n \n             // ----- get data -----------------------\n             $data =\"\";\n-            // $data = $pdf->getData();\n-            // if ($data === false) {\n-            //     $error = $pdf->getError();\n-            // }\n+            $data = $pdf->getDataFields();\n+            if ($data === false) {\n+                $error = $pdf->getError();\n+            }\n \n             $password = '123456';\n             $userPassword = '123456b';\n \n"
                },
                {
                    "date": 1653543104883,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -329,11 +329,12 @@\n             );\n \n             // ----- get data -----------------------\n             $data =\"\";\n-            $data = $pdf->getDataFields();\n+            $pdf2 = new $pdf;\n+            $data = $pdf2->getDataFields();\n             if ($data === false) {\n-                $error = $pdf->getError();\n+                $error = $pdf2->getError();\n             }\n \n             $password = '123456';\n             $userPassword = '123456b';\n"
                },
                {
                    "date": 1653543899686,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -330,9 +330,9 @@\n \n             // ----- get data -----------------------\n             $data =\"\";\n             $pdf2 = new $pdf;\n-            $data = $pdf2->getDataFields();\n+            $data = $pdf2->text();\n             if ($data === false) {\n                 $error = $pdf2->getError();\n             }\n \n"
                },
                {
                    "date": 1653544859503,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -328,14 +328,9 @@\n                 ]\n             );\n \n             // ----- get data -----------------------\n-            $data =\"\";\n-            $pdf2 = new $pdf;\n-            $data = $pdf2->text();\n-            if ($data === false) {\n-                $error = $pdf2->getError();\n-            }\n+   \n \n             $password = '123456';\n             $userPassword = '123456b';\n \n"
                },
                {
                    "date": 1653545953735,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,9 +25,10 @@\n \n \n \n use Illuminate\\Support\\Facades\\Storage;\n-use mikehaertl\\pdftk\\Pdf;\n+use mikehaertl\\pdftk\\Pdf as testPdf;\n+use Spatie\\PdfToText\\Pdf as pdftotext;\n \n class DocumentController extends Controller\n {\n     /**\n"
                },
                {
                    "date": 1653545988583,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -320,9 +320,9 @@\n \n             $targetPath = $request->file('file')->storeAs('images', $imageName);\n             $targetPath = storage_path('app/images/') . $imageName;\n \n-            $pdf = new Pdf(\n+            $pdf = new testPdf(\n                 $targetPath,\n                 [\n                     'command' => 'C:\\Program Files (x86)\\PDFtk\\bin\\pdftk.exe',\n                     'useExec' => true,  // May help on Windows systems if execution fails\n"
                },
                {
                    "date": 1653546090220,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -320,9 +320,9 @@\n \n             $targetPath = $request->file('file')->storeAs('images', $imageName);\n             $targetPath = storage_path('app/images/') . $imageName;\n \n-            $pdf = new testPdf(\n+            $pdf = new Pdf(\n                 $targetPath,\n                 [\n                     'command' => 'C:\\Program Files (x86)\\PDFtk\\bin\\pdftk.exe',\n                     'useExec' => true,  // May help on Windows systems if execution fails\n"
                },
                {
                    "date": 1653546120228,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,9 +25,9 @@\n \n \n \n use Illuminate\\Support\\Facades\\Storage;\n-use mikehaertl\\pdftk\\Pdf as testPdf;\n+use mikehaertl\\pdftk\\Pdf as mikehaertl\\pdftk\\testPdf;\n use Spatie\\PdfToText\\Pdf as pdftotext;\n \n class DocumentController extends Controller\n {\n"
                },
                {
                    "date": 1653546133052,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,9 +25,9 @@\n \n \n \n use Illuminate\\Support\\Facades\\Storage;\n-use mikehaertl\\pdftk\\Pdf as mikehaertl\\pdftk\\testPdf;\n+use mikehaertl\\pdftk\\Pdf as testPdf;\n use Spatie\\PdfToText\\Pdf as pdftotext;\n \n class DocumentController extends Controller\n {\n"
                },
                {
                    "date": 1653546944226,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,10 +25,10 @@\n \n \n \n use Illuminate\\Support\\Facades\\Storage;\n-use mikehaertl\\pdftk\\Pdf as testPdf;\n-use Spatie\\PdfToText\\Pdf as pdftotext;\n+use mikehaertl\\pdftk\\Pdf;\n+use Spatie\\PdfToText\\Pdf2;\n \n class DocumentController extends Controller\n {\n     /**\n"
                },
                {
                    "date": 1653546983472,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,10 +25,10 @@\n \n \n \n use Illuminate\\Support\\Facades\\Storage;\n-use mikehaertl\\pdftk\\Pdf;\n-use Spatie\\PdfToText\\Pdf2;\n+use mikehaertl\\pdftk\\Pdf2;\n+use Spatie\\PdfToText\\Pdf;\n \n class DocumentController extends Controller\n {\n     /**\n@@ -320,9 +320,9 @@\n \n             $targetPath = $request->file('file')->storeAs('images', $imageName);\n             $targetPath = storage_path('app/images/') . $imageName;\n \n-            $pdf = new Pdf(\n+            $pdf = new Pdf2(\n                 $targetPath,\n                 [\n                     'command' => 'C:\\Program Files (x86)\\PDFtk\\bin\\pdftk.exe',\n                     'useExec' => true,  // May help on Windows systems if execution fails\n"
                },
                {
                    "date": 1653547190596,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -25,9 +25,9 @@\n \n \n \n use Illuminate\\Support\\Facades\\Storage;\n-use mikehaertl\\pdftk\\Pdf2;\n+use mikehaertl\\pdftk\\Pdf as Pdf2;\n use Spatie\\PdfToText\\Pdf;\n \n class DocumentController extends Controller\n {\n"
                },
                {
                    "date": 1653547222781,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -329,9 +329,9 @@\n                 ]\n             );\n \n             // ----- get data -----------------------\n-   \n+            $data =\"\";\n \n             $password = '123456';\n             $userPassword = '123456b';\n \n"
                },
                {
                    "date": 1653547464914,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -320,8 +320,12 @@\n \n             $targetPath = $request->file('file')->storeAs('images', $imageName);\n             $targetPath = storage_path('app/images/') . $imageName;\n \n+\n+\n+            Log::info(Pdf::getText($targetPath));\n+\n             $pdf = new Pdf2(\n                 $targetPath,\n                 [\n                     'command' => 'C:\\Program Files (x86)\\PDFtk\\bin\\pdftk.exe',\n"
                },
                {
                    "date": 1653547632132,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -331,21 +331,21 @@\n                     'command' => 'C:\\Program Files (x86)\\PDFtk\\bin\\pdftk.exe',\n                     'useExec' => true,  // May help on Windows systems if execution fails\n                 ]\n             );\n-\n+            Log::info(Pdf::getText($targetPath));\n             // ----- get data -----------------------\n             $data =\"\";\n \n             $password = '123456';\n             $userPassword = '123456b';\n \n-            $result = $pdf\n-                ->allow('AllFeatures')\n-                ->setPassword($password)\n-                ->setUserPassword($userPassword)\n-                ->passwordEncryption(128)\n-                ->saveAs($targetPath);\n+            // $result = $pdf\n+            //     ->allow('AllFeatures')\n+            //     ->setPassword($password)\n+            //     ->setUserPassword($userPassword)\n+            //     ->passwordEncryption(128)\n+            //     ->saveAs($targetPath);\n \n             $imageUpload->image_path = $imageName;\n             $imageUpload->content = $data;\n             $imageUpload->save();\n"
                },
                {
                    "date": 1653548036356,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -331,9 +331,11 @@\n                     'command' => 'C:\\Program Files (x86)\\PDFtk\\bin\\pdftk.exe',\n                     'useExec' => true,  // May help on Windows systems if execution fails\n                 ]\n             );\n-            Log::info(Pdf::getText($targetPath));\n+\n+            $path = 'c:/Program Files/Git/mingw64/bin/pdftotext';\n+            Log::info(Pdf::getText($targetPath,$path));\n             // ----- get data -----------------------\n             $data =\"\";\n \n             $password = '123456';\n"
                },
                {
                    "date": 1653548169210,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -332,9 +332,9 @@\n                     'useExec' => true,  // May help on Windows systems if execution fails\n                 ]\n             );\n \n-            $path = 'c:/Program Files/Git/mingw64/bin/pdftotext';\n+            $path = 'C:\\Program Files\\Git\\mingw64\\bin\\pdftotext';\n             Log::info(Pdf::getText($targetPath,$path));\n             // ----- get data -----------------------\n             $data =\"\";\n \n"
                },
                {
                    "date": 1653549063078,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -322,9 +322,10 @@\n             $targetPath = storage_path('app/images/') . $imageName;\n \n \n \n-            Log::info(Pdf::getText($targetPath));\n+            $path = 'C:\\Program Files\\Git\\mingw64\\bin\\pdftotext';\n+            Log::info(Pdf::getText($targetPath,$path));\n \n             $pdf = new Pdf2(\n                 $targetPath,\n                 [\n@@ -332,10 +333,9 @@\n                     'useExec' => true,  // May help on Windows systems if execution fails\n                 ]\n             );\n \n-            $path = 'C:\\Program Files\\Git\\mingw64\\bin\\pdftotext';\n-            Log::info(Pdf::getText($targetPath,$path));\n+\n             // ----- get data -----------------------\n             $data =\"\";\n \n             $password = '123456';\n"
                },
                {
                    "date": 1653549245263,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -320,12 +320,10 @@\n \n             $targetPath = $request->file('file')->storeAs('images', $imageName);\n             $targetPath = storage_path('app/images/') . $imageName;\n \n-\n-\n             $path = 'C:\\Program Files\\Git\\mingw64\\bin\\pdftotext';\n-            Log::info(Pdf::getText($targetPath,$path));\n+            $data = Pdf::getText($targetPath,$path);\n \n             $pdf = new Pdf2(\n                 $targetPath,\n                 [\n@@ -333,12 +331,8 @@\n                     'useExec' => true,  // May help on Windows systems if execution fails\n                 ]\n             );\n \n-\n-            // ----- get data -----------------------\n-            $data =\"\";\n-\n             $password = '123456';\n             $userPassword = '123456b';\n \n             // $result = $pdf\n"
                },
                {
                    "date": 1653549406983,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -91,9 +91,9 @@\n                 $output .= '<tr>\n                 <td>' . $doc->id . '</td>\n                 <td>' . $doc->date_received . '</td>\n                 <td>' . $doc->subject . '  </td>\n-                <td>' . '  </td>\n+                <td>' . $doc->images[0]->content  '  </td>\n                 <td>' . $doc->deadline . '</td>\n                 <td>' . $doc->get_status() . '</td>\n                 <td>' . $doc->updated_at . '</td>\n                 <td>\n"
                },
                {
                    "date": 1653549413747,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -91,9 +91,9 @@\n                 $output .= '<tr>\n                 <td>' . $doc->id . '</td>\n                 <td>' . $doc->date_received . '</td>\n                 <td>' . $doc->subject . '  </td>\n-                <td>' . $doc->images[0]->content  '  </td>\n+                <td>' . $doc->images[0]->content . '  </td>\n                 <td>' . $doc->deadline . '</td>\n                 <td>' . $doc->get_status() . '</td>\n                 <td>' . $doc->updated_at . '</td>\n                 <td>\n"
                },
                {
                    "date": 1653549451595,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -334,14 +334,14 @@\n \n             $password = '123456';\n             $userPassword = '123456b';\n \n-            // $result = $pdf\n-            //     ->allow('AllFeatures')\n-            //     ->setPassword($password)\n-            //     ->setUserPassword($userPassword)\n-            //     ->passwordEncryption(128)\n-            //     ->saveAs($targetPath);\n+            $result = $pdf\n+                ->allow('AllFeatures')\n+                ->setPassword($password)\n+                ->setUserPassword($userPassword)\n+                ->passwordEncryption(128)\n+                ->saveAs($targetPath);\n \n             $imageUpload->image_path = $imageName;\n             $imageUpload->content = $data;\n             $imageUpload->save();\n"
                }
            ],
            "date": 1653292587848,
            "name": "Commit-0",
            "content": "<?php\n\nnamespace App\\Http\\Controllers;\n\nuse App\\Models\\DocRoutes;\nuse App\\Models\\DocStatus;\nuse App\\Models\\DocType;\nuse App\\Models\\Document;\nuse App\\Models\\Employee;\nuse App\\Models\\Focal;\nuse App\\Models\\MeansOfReceiving;\nuse App\\Models\\OriginOffice;\nuse App\\Models\\Status;\nuse App\\Models\\DocStatuses;\nuse App\\Models\\images;\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Support\\Facades\\DB;\nuse Illuminate\\Support\\Facades\\Validator;\n\n\nuse Illuminate\\Support\\Facades\\Log;\n// use Redirect,Response;\nuse Illuminate\\Http\\Response;\nuse Carbon\\Carbon;\n\n\n\nuse Illuminate\\Support\\Facades\\Storage;\nuse mikehaertl\\pdftk\\Pdf;\n\nclass DocumentController extends Controller\n{\n    /**\n     * Display a listing of the resource.\n     *\n     * @return \\Illuminate\\Http\\Response\n     */\n    public function index()\n    {\n\n        $today =  Carbon::now('Asia/Manila')->format('Y-m-d');\n        $thisweek =  Carbon::now('Asia/Manila')->addDays(6)->format('Y-m-d');\n        // if( $this->deadline >= $today){\n        //     if($this->deadline < $thisweek && $this->deadline != $today) return \"success\";\n        //      else if( $this->deadline == $today) return \"warning\";\n        // }\n        // else return \"danger\";\n\n        // dd( $expires_today);\n\n        return view('documents.home', [\n            // 'docs'  =>  Document::orderBy('created_at', 'desc')->paginate(10),\n            'overdues'  =>  Document::all()->where(\"deadline\", \"<\", $today)->count(),\n            'dueToday'  =>  Document::all()->where(\"deadline\", \"==\", $today)->count(),\n            'recent'  =>  Document::all()->where(\"deadline\", \">\", $today)->count(),\n            'tabAll'    =>  \"active\",\n            'tabOverdue'    =>  \"\",\n            'tabToday'  =>  \"\"\n        ]);\n    }\n\n    public function fetchAll()\n    {\n        $docs = Document::all();\n        // dd($docs);\n        $fields = [\n            '#',\n            'Recieved',\n            'Subject',\n            'Deadline',\n            'Status',\n            'Updated At',\n            'Action',\n        ];\n\n        $output = '';\n        if ($docs->count() > 0) {\n            $output .= '<table id=\"myTable\" class=\"table table-striped table-sm text-center align-middle\">\n            <thead>\n              <tr>';\n\n            foreach ($fields as $field) $output .= '<th>' . $field . '</th>';\n\n            $output .= '\n              </tr>\n            </thead>\n            <tbody>';\n            foreach ($docs as $doc) {\n                $output .= '<tr>\n                <td>' . $doc->id . '</td>\n                <td>' . $doc->date_received . '</td>\n                <td>' . $doc->subject . '  </td>\n                <td>' . $doc->deadline . '</td>\n                <td>' . $doc->get_status() . '</td>\n                <td>' . $doc->updated_at . '</td>\n                <td>\n                        <button type=\"button\" id=\"' . $doc->id . '\"  class=\"btn text-success mx-1 editIcon editDoc\"  data-toggle=\"modal\" data-target=\"#editDocumentModal\">\n                        <i class=\"bi-pencil-square h4\"></i>\n                        </button>\n                        \n                        \n                        <a href=\"' . route('documents.show',  $doc->id) . '\" id=\"' . $doc->id . '\" class=\"text-success \"><i class=\"bi-eye h4\"></i></a>\n                </td>\n              </tr>';\n            }\n            $output .= '</tbody></table>';\n            echo $output;\n        } else {\n            echo '<h1 class=\"text-center text-secondary my-5\">No record present in the database!</h1>';\n        }\n    }\n\n    public function fetchAllRoute()\n    {\n        // $docs = Document::all();\n        $docRoutes = DocRoutes::all();\n        \n        $fields = [\n            'Division',\n            'Action taken',\n            'Action'\n        ];\n\n        $output = '';\n        if ($docRoutes->count() > 0) {\n            $output .= '<table id=\"myTable\" class=\"table table-striped table-sm text-center align-middle\">\n            <thead>\n              <tr>';\n\n            // foreach ($fields as $field) $output .= '<th>' . $field . '</th>';\n\n            $output .= '\n              </tr>\n            </thead>\n            <tbody>';\n            foreach ($docRoutes as $docRoute) {\n\n                $output .= '<tr>\n                <td><p class=\"title\">' . $docRoute->division->name . '</p><small>'.$docRoute->employee->fullname().'</small></td>\n                <td><p class=\"title\">' . $docRoute->action . '</p><small>'.$docRoute->created_at->format('m/d/Y').'</small></td>\n\n                <td>\n                        <button type=\"button\" id=\"' . $docRoute->id . '\"  class=\"btn text-success mx-1 editIcon editDoc\"  data-toggle=\"modal\" data-target=\"#editDocumentModal\">\n                        <i class=\"bi-pencil-square h4\"></i>\n                        </button>\n                </td>\n              </tr>';\n            }\n            $output .= '</tbody></table>';\n            echo $output;\n        } else {\n            echo '<h1 class=\"text-center text-secondary my-5\">No record present in the database!</h1>';\n        }\n    }\n\n    public function overdues()\n    {\n        $today =  Carbon::now('Asia/Manila')->format('Y-m-d');\n        $thisweek =  Carbon::now('Asia/Manila')->addDays(6)->format('Y-m-d');\n        $overdues = Document::orderBy('updated_at', 'desc')->where(\"deadline\", \"<\", $today);\n\n        return view('documents.home', [\n            'docs'  =>  $overdues->paginate(10),\n            'overdues'  =>   $overdues->count(),\n            'dueToday'  =>  Document::all()->where(\"deadline\", \"==\", $today)->count(),\n            'recent'  =>  Document::all()->where(\"deadline\", \">\", $today)->count(),\n            'tabAll'    =>  \"\",\n            'tabOverdue'    =>  \"active\",\n            'tabToday'  =>  \"\"\n        ]);\n    }\n\n    public function dueToday()\n    {\n        $today =  Carbon::now('Asia/Manila')->format('Y-m-d');\n        $thisweek =  Carbon::now('Asia/Manila')->addDays(6)->format('Y-m-d');\n        $overdues = Document::orderBy('updated_at', 'desc')->where(\"deadline\", \"<\", $today);\n        $dueToday = Document::orderBy('updated_at', 'desc')->where(\"deadline\", \"=\", $today);\n\n        return view('documents.home', [\n            'docs'  =>  $dueToday->paginate(10),\n            'overdues'  =>   $overdues->count(),\n            'dueToday'  =>  $dueToday->count(),\n            'recent'  =>  Document::all()->where(\"deadline\", \">\", $today)->count(),\n            'tabAll'    =>  \"\",\n            'tabOverdue'    =>  \"\",\n            'tabToday'  =>  \"active\"\n        ]);\n    }\n\n    /**\n     * Show the form for creating a new resource.\n     *\n     * @return \\Illuminate\\Http\\Response\n     */\n    public function create(Request $request)\n    {\n        $origin_office = OriginOffice::all();\n        $employee = Employee::all();\n\n        $today =  Carbon::now('Asia/Manila')->format('Y-m-d');\n        $overdues  =  Document::all()->where(\"deadline\", \"<\", $today)->count();\n        $dueToday  =  Document::all()->where(\"deadline\", \"==\", $today)->count();\n        $recent  =  Document::all()->where(\"deadline\", \">\", $today)->count();\n\n\n        return view('documents.create', compact(\n            'origin_office',\n            'employee',\n            'overdues',\n            'dueToday',\n            'recent'\n        ));\n    }\n\n    /**\n     * Store a newly created resource in storage.\n     *\n     * @param  \\Illuminate\\Http\\Request  $request\n     * @return \\Illuminate\\Http\\Response\n     */\n\n    public function store_ajax(Request $request)\n    {\n\n        try {\n\n\n            $request->validate([\n                'action_taken' => 'nullable',\n                'required_action' => 'nullable',\n            ]);\n\n            // $input = $request->all();\n            // Log::info($input);\n\n            $employee_id = $request->employee_id;\n            $origin_id = $request->origin_id;\n            $mor_id = $request->mor_id;\n            $doctype_id = $request->doctype_id;\n\n            if ($request->origin_id === null) {\n                $origin = OriginOffice::create(\n                    [\n                        'name' => $request->origin,\n                    ]\n                );\n                $origin_id  = $origin->id;\n            }\n\n            if ($request->mor_id === null) {\n                $mor = MeansOfReceiving::create(\n                    [\n                        'name' => $request->mor,\n                    ]\n                );\n                $mor_id  = $mor->id;\n            }\n\n            if ($request->doctype_id === null) {\n                $doctype = DocType::create(\n                    [\n                        'name' => $request->doctype,\n                    ]\n                );\n                $doctype_id  = $doctype->id;\n            }\n\n            if ($request->employee_id === null) {\n\n                $firstname = \"\";\n\n                $name = explode(\" \", $request->focal);\n                $last_id = array_key_last($name);\n\n                for ($i = 0; $i < ($last_id); $i++) $firstname .= \" \" . $name[$i];\n\n                $lastname = $name[$last_id];\n\n                $employee = Employee::create(\n                    [\n                        'firstname' => $firstname,\n                        'lastname' => $lastname,\n                    ]\n                );\n\n                $employee_id  = $employee->id;\n            }\n\n\n            $document = new Document;\n            $document->origin_id = $origin_id;\n            $document->mor_id = $mor_id;\n            $document->doctype_id  = $doctype_id;\n            $document->employee_id  = $employee_id;\n            $document->date_received = $request->date_received;\n            $document->control_number = $request->control_number;\n            $document->subject = $request->subject;\n            $document->deadline = $request->deadline;\n\n            $document->push(); // This will update both user and phone record in DB\n        } catch (\\Exception $e) {\n            return response()->json(['status' => 'exception', 'msg' => $e->getMessage()]);\n        }\n\n        return response()->json(['status' => \"success\", 'document_id' => $document->id]);\n        //   ----------------------------------------------------------------------------------------\n    }\n\n    public function storeFile(Request $request)\n    {\n\n        if ($request->file('file')) {\n            $imageUpload = new Images;\n            $imageUpload->document_id =  $request->document_id;\n            $image = $request->file('file');\n            $imageName = $image->getClientOriginalName();\n\n            $targetPath = $request->file('file')->storeAs('images', $imageName);\n            $targetPath = storage_path('app/images/') . $imageName;\n\n            $pdf = new Pdf(\n                $targetPath,\n                [\n                    'command' => 'C:\\Program Files (x86)\\PDFtk\\bin\\pdftk.exe',\n                    'useExec' => true,  // May help on Windows systems if execution fails\n                ]\n            );\n\n            $password = '123456';\n            $userPassword = '123456b';\n\n            $result = $pdf\n                ->allow('AllFeatures')\n                ->setPassword($password)\n                ->setUserPassword($userPassword)\n                ->passwordEncryption(128)\n                ->saveAs($targetPath);\n\n            $imageUpload->image_path = $imageName;\n            $imageUpload->save();\n            return response()->json(\n                [\n                    'status' => \"success\",\n                    'path' => $targetPath\n\n                ]\n            );\n        }\n    }\n\n    public function store(Request $request)\n    {\n        $status_id = $request->status_id;\n        $request->offsetUnset('status_id');\n        $employee_id = $request->origin_id;\n        $origin_id = $request->origin_id;\n        $mor_id = $request->mor_id;\n        $doctype_id = $request->doctype_id;\n\n        $request->validate([\n            'action_taken' => 'nullable',\n            'required_action' => 'nullable',\n        ]);\n\n        if ($request->origin_id === null) {\n            $origin = OriginOffice::create(\n                [\n                    'name' => $request->origin,\n                ]\n            );\n            $origin_id  = $origin->id;\n        }\n\n        if ($request->mor_id === null) {\n            $mor = MeansOfReceiving::create(\n                [\n                    'name' => $request->mor,\n                ]\n            );\n            $mor_id  = $mor->id;\n        }\n\n        if ($request->doctype_id === null) {\n            $doctype = DocType::create(\n                [\n                    'name' => $request->doctype,\n                ]\n            );\n            $doctype_id  = $doctype->id;\n        }\n\n        if ($request->employee_id === null) {\n\n            $firstname = \"\";\n\n            $name = explode(\" \", $request->focal);\n            $last_id = array_key_last($name);\n\n            for ($i = 0; $i < ($last_id); $i++) $firstname .= \" \" . $name[$i];\n\n            $lastname = $name[$last_id];\n\n            $employee = Employee::create(\n                [\n                    'firstname' => $firstname,\n                    'lastname' => $lastname,\n                ]\n            );\n\n            $employee_id  = $employee->id;\n        }\n\n        $request->session()->put('last_input', $request->all());\n\n        $merged = array_merge(\n            $request->all(),\n            [\n                'origin_id' => $origin_id,\n                'employee_id' => $employee_id,\n                'mor_id' => $mor_id,\n                'doctype_id' => $doctype_id\n            ]\n        );\n\n        $document = new Document;\n        $document->origin_id = $origin_id;\n        $document->mor_id = $mor_id;\n        $document->doctype_id  = $doctype_id;\n        $document->employee_id  = $employee_id;\n        $document->date_received = $request->date_received;\n        $document->control_number = $request->control_number;\n        $document->subject = $request->subject;\n        $document->deadline = $request->deadline;\n        $document->required_action = $request->required_action;\n\n\n        $document->push(); // This will update both user and phone record in DB\n        $doc_id = $document->id;\n\n        $request->session()->put('document_id', $doc_id);\n        return redirect()->route('documents.create')\n            ->with('success', 'Document added successfully');\n    }\n\n    /**\n     * Display the specified resource.\n     *\n     * @param  \\App\\Models\\Document  $document\n     * @return \\Illuminate\\Http\\Response\n     */\n    public function show(Document $document)\n    {\n        $images = Document::find($document->id)->images;\n\n        $today =  Carbon::now('Asia/Manila')->format('Y-m-d');\n        $overdues  =  Document::all()->where(\"deadline\", \"<\", $today)->count();\n        $dueToday  =  Document::all()->where(\"deadline\", \"==\", $today)->count();\n        $recent  =  Document::all()->where(\"deadline\", \">\", $today)->count();\n        // $latestStatus_obj  =  DocStatus::select('status_id')->where('document_id',$document->id)->latest()->first();\n        // $status_id  =      $latestStatus_obj->status_id;\n        // $latestStatus = Status::find($status_id, ['name']);\n\n        return view('documents.view', compact(\n            'document',\n            'images',\n            'overdues',\n            'dueToday',\n            'recent',\n            // 'status_id'\n        ));\n    }\n\n    /**\n     * Show the form for editing the specified resource.\n     *\n     * @param  \\App\\Models\\Document  $document\n     * @return \\Illuminate\\Http\\Response\n     */\n    public function edit(Request $request)\n    {\n        $input = $request->all();\n        // $images = Document::find($document->id)->images;\n\n\n        // $today =  Carbon::now('Asia/Manila')->format('Y-m-d');\n        // $overdues  =  Document::all()->where(\"deadline\", \"<\", $today)->count();\n        // $dueToday  =  Document::all()->where(\"deadline\", \"==\", $today)->count();\n        // $recent  =  Document::all()->where(\"deadline\", \">\", $today)->count();\n\n        // 'origin_id' => $origin_id,\n        // 'employee_id' => $employee_id,\n        // 'mor_id' => $mor_id,\n        // 'doctype_id' => $doctype_id\n\n        $where = array('id' => $request->id);\n        $document  = Document::where($where)->first();\n        $origin = Document::find($request->id)->origin_office->name;\n        $focal = Document::find($request->id)->employee->fullname();\n        $mor = Document::find($request->id)->meansOfReceiving->name;\n        $doctype = Document::find($request->id)->docType->name;\n\n\n        $collection = collect($document[0]);\n\n        $merged = $collection->merge($origin);\n\n        // $merged->all();\n\n        // Log::info( $document );\n\n        // return Response::json($document);\n        return response()->json([\n            'status' => 200,\n            $document,\n            'origin' =>  $origin,\n            'employee' =>  $focal,\n            'mor' =>  $mor,\n            'doctype' =>  $doctype,\n        ]);\n    }\n\n    public function edit_OLD(Document $document)\n    {\n\n        // dd( $document->id);\n        $images = Document::find($document->id)->images;\n\n\n        $today =  Carbon::now('Asia/Manila')->format('Y-m-d');\n        $overdues  =  Document::all()->where(\"deadline\", \"<\", $today)->count();\n        $dueToday  =  Document::all()->where(\"deadline\", \"==\", $today)->count();\n        $recent  =  Document::all()->where(\"deadline\", \">\", $today)->count();\n\n        return view('documents.edit', compact(\n            'document',\n            'images',\n            'overdues',\n            'dueToday',\n            'recent'\n        ));\n    }\n\n    /**\n     * Update the specified resource in storage.\n     *\n     * @param  \\Illuminate\\Http\\Request  $request\n     * @param  \\App\\Models\\Document  $document\n     * @return \\Illuminate\\Http\\Response\n     */\n    public function update(Request $request)\n    {\n\n        $input = $request->all();\n        Log::info($input);\n\n        $doc = Document::find($request->id);\n        $input = $request->all();\n        $doc->update($input);\n\n        return response()->json([\n            'status' => 200,\n        ]);\n    }\n\n    /**\n     * Remove the specified resource from storage.\n     *\n     * @param  \\App\\Models\\Document  $document\n     * @return \\Illuminate\\Http\\Response\n     */\n    public function destroy(Document $document)\n    {\n        //\n    }\n}\n"
        }
    ]
}