{
    "sourceFile": "resources/views/documents/edit.blade.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1654128696957,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1654128696957,
            "name": "Commit-0",
            "content": "@extends('layouts.app', ['activePage' => 'dashboard', 'titlePage' => __('Document')])\n@section('content')\n<div class=\"content\">\n    <div class=\"container-fluid\">\n      <div class=\"row\">\n        {{-- {{ dd($document->meansOfReceiving)}} --}}\n        {{-- --------------------------------------------------------- --}}\n \n        @if ($message = Session::get('success'))\n        <div data-notify=\"container\" \n             class=\"col-11 col-md-4 alert alert-info alert-with-icon animated fadeInDown\" \n             role=\"alert\" \n             data-notify-position=\"top-center\" \n             style=\"display: inline-block; margin: 15px auto; position: fixed; transition: all 0.5s ease-in-out 0s; z-index: 1031; top: 20px; left: 0px; right: 0px;\"><button type=\"button\" aria-hidden=\"true\" class=\"close\" data-notify=\"dismiss\" style=\"position: absolute; right: 10px; top: 50%; margin-top: -9px; z-index: 1033;\"><i class=\"material-icons\">close</i></button><i data-notify=\"icon\" class=\"material-icons\">add_alert</i><span data-notify=\"title\"></span>\n              <span data-notify=\"message\">\n                Successfully updated <b>Origin Office Table</b>\n              </span>\n              <a href=\"#\" target=\"_blank\" data-notify=\"url\"></a>\n        </div>\n        @endif\n\n       \n        <div class=\"col-md-12\">\n\n\n\n          \n          <form method=\"post\" action=\"{{ route('documents.update', $document->id) }}\" autocomplete=\"off\" class=\"form-horizontal\">\n            @csrf\n            @method('put')\n\n\n            <div class=\"card form-wrap\">\n              <div class=\"card-header card-header-primary\">\n                <h4 class=\"card-title\">{{ __('Edit Documentxxxxxxxxxxx') }} </h4>\n              </div>\n              <div class=\"card-body \">\n                {{-- @if (session('status'))\n                  <div class=\"row\">\n                    <div class=\"col-sm-12\">\n                      <div class=\"alert alert-success\">\n                        <button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">\n                          <i class=\"material-icons\">close</i>\n                        </button>\n                        <span>{{ session('status') }}</span>\n                      </div>\n                    </div>\n                  </div>\n                @endif --}}\n\n                <div class=\"row justify-content-between\">\n\n                    <div class=\"col-sm-4\">\n                        <div class=\"row\">\n                            <div class=\"col-sm-6\">\n                                <label>{{ __('Date Received') }}</label>\n                                <div class=\"form-group\">\n                                  <input type=\"text\" id=\"date_received\" name=\"date_received\" class=\"form-control datepicker\" value=\"{{ $document->date_received }}\">\n                                  {{-- <input type=\"hidden\" name=\"date_received\" value=\" \" > --}}\n                                </div>\n                            </div>\n                            <div class=\"col-sm-6\">\n                                <label>{{ __('Deadline / Schedule') }}</label>\n                                <div class=\"form-group\">\n                                  <input type=\"text\" id=\"deadline\" name=\"deadline\" class=\"form-control datepicker\" value=\"{{ $document->deadline }}\">\n                                  {{-- <input type=\"hidden\" name=\"deadline\" value=\" \" > --}}\n                                </div>\n                            </div>\n                        </div>\n                        {{-- <div class=\"row\">\n                            <div class=\"col-sm-12\">\n                                <label>{{ __('Status') }}</label>\n                                <div class=\"form-group\">\n                                  <input data-db=\"status\" type=\"text\" id=\"status_id\" name=\"name\" class=\"form-control autocomp\" placeholder=\"{{ $document->statuses[0]->status->name}}\">\n                                  <input type=\"hidden\" name=\"status_id\" value=\"{{ $document->statuses[0]->status->id }}\" >\n                                </div>\n                            </div>\n                        </div> --}}\n                        <div class=\"row\">\n                            <div class=\"col-sm-12\">\n                                <label>{{ __('Focal') }}</label>\n                                <div class=\"form-group\">\n                                  <input data-db=\"employee\" type=\"text\" id=\"employee_id\" name=\"name\" class=\"form-control autocomp\" placeholder=\"{{ $document->employee->fullname() }}\">\n                                  <input type=\"hidden\" name=\"employee_id\" value=\"{{ $document->employee_id }}\" >\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"row\">\n                            <div class=\"col-sm-12\">\n                                <label>{{ __('Origin Office') }}</label>\n                                <div class=\"form-group\">\n                                  <input data-db=\"OriginOffice\" type=\"text\" id=\"origin_id\" name=\"name\" class=\"form-control autocomp\" placeholder=\"{{ $document->origin_office->name }}\" >\n                                  <input type=\"hidden\" name=\"origin_id\" value=\"{{ $document->origin_id }}\" >\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"row\">\n                            <div class=\"col-sm-6\">\n                                <label>{{ __('Means of Receiving') }}</label>\n                                <div class=\"form-group\">\n                                  <input data-db=\"mor\" type=\"text\" id=\"mor_id\" name=\"name\" class=\"form-control autocomp\" placeholder=\"{{ $document->meansOfReceiving->name}}\" >\n                                  <input type=\"hidden\" name=\"mor_id\" value=\"{{$document->mor_id}}\" >\n                                </div>                                \n                                                           \n                            </div>\n                            <div class=\"col-sm-6\">\n                                <label>{{ __('Document Type') }}</label>\n                                <div class=\"form-group\">\n                                  <input data-db=\"doctype\" type=\"text\" id=\"doctype_id\" name=\"name\" class=\"form-control autocomp\" placeholder=\"{{$document->doctype->name}}\">\n                                  <input type=\"hidden\" name=\"doctype_id\" value=\"{{$document->doctype_id}}\" >\n                                </div> \n                            </div>\n                        </div>\n\n                        <div class=\"row\">\n                          <div class=\"col-sm-12\">\n                            <div class=\"list-group\">\n                              @if($images)\n                              @foreach ($images as $image)\n                                <a href=\"#\" class=\"list-group-item list-group-item-action\" data-toggle=\"modal\" data-target=\"#exampleModalLong\">\n                                  <i class=\"material-icons text-danger\">attachment</i>  {{$image->image_path}}\n                                </a>\n                                {{-- <a href=\"#\" class=\"badge bg-primary rounded-pill\" data-toggle=\"modal\" data-target=\"#exampleModalLong\"><i class=\"material-icons text-danger\">attachment</i> View</a> --}}\n                                @endforeach\n                                @endif\n                            </div>\n\n                            \n                            <button type=\"button\" class=\"btn btn-primary btn-block btn-sm\" id=\"attach\">Add Attachment</button>\n                          </div>\n\n                        </div>\n                        \n                    </div>\n                    <div class=\"col-sm-8\">\n                      <div class=\"row\">\n                          <div class=\"col-sm-3\">\n                              <label>{{ __('Control #') }}</label>\n                              <div class=\"form-group{{ $errors->has('control_number') ? ' has-danger' : '' }}\">\n                                <input class=\"form-control{{ $errors->has('control_number') ? ' is-invalid' : '' }}\" name=\"control_number\" id=\"input-control_number\" type=\"text\" value=\"{{ $document->control_number }}\"  required=\"true\" aria-required=\"true\"/>\n                                @if ($errors->has('control_number'))\n                                  <span id=\"name-error\" class=\"error text-danger\" for=\"input-name\">{{ $errors->first('control_number') }}</span>\n                                @endif\n                              </div>\n                          </div>\n                          <div class=\"col-sm-9\">\n                              <label>{{ __('Subject') }}</label>\n                              <div class=\"form-group{{ $errors->has('subject') ? ' has-danger' : '' }}\">\n                                <input class=\"form-control{{ $errors->has('subject') ? ' is-invalid' : '' }}\" name=\"subject\" id=\"input-subject\" type=\"text\" value=\"{{ $document->subject }}\"  required=\"true\" aria-required=\"true\"/>\n                                @if ($errors->has('subject'))\n                                  <span id=\"name-error\" class=\"error text-danger\" for=\"input-name\">{{ $errors->first('subject') }}</span>\n                                @endif\n                              </div>\n                          </div>\n                      </div>     \n                      {{-- <div class=\"row\">\n                          <div class=\"col-sm-12 mt-4\">\n                              <div class=\"form-group\">\n                                  <label for=\"action_taken\"> {{ __(\"Action Taken\")}}</label>\n                                  <textarea class=\"form-control\" id=\"action_taken\" name=\"action_taken\" rows=\"5\">{{ $document->action_taken }}</textarea>\n                                </div>\n                          </div>\n                      </div>                    --}}\n                      <div class=\"row\">\n                          <div class=\"col-sm-12 mt-4\">\n                              <div class=\"form-group\">\n                                  <label for=\"required_action\"> {{ __(\"Action Required\")}}</label>\n                                  <textarea class=\"form-control\" id=\"required_action\" name=\"required_action\" rows=\"9\">{{ $document->required_action }}</textarea>\n                                </div>\n                                <button type=\"submit\" class=\"btn btn-lg btn-success btn-block\">{{ __('Save') }}</button>\n                          </div>\n                      </div>                   \n                    </div>\n                </div>\n                <div id=\"example1\"></div>\n                \n          </div>\n              <div class=\"card-footer\">\n                {{-- <button type=\"submit\" class=\"btn btn-lg btn-success btn-block\">{{ __('Save') }}</button> --}}\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n      \n    </div>\n  </div>\n\n\n<div class=\"modal fade\" id=\"exampleModalLong\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalLongTitle\" aria-hidden=\"true\">\n  <div class=\"modal-dialog modal-xl\" role=\"document\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h5 class=\"modal-title\" id=\"exampleModalLongTitle\">Attachment</h5>\n        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n      </div>\n      <div class=\"modal-body\">\n        <div id=\"pdf-viewer\"></div>\n      </div>\n      <div class=\"modal-footer\">\n        <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class=\"modal fade\" id=\"attachmentModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"attachmentModalTitle\" aria-hidden=\"true\">\n  <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\">\n        <h5 class=\"modal-title\" id=\"attachmentModalTitle\">Upload Files {{$document->id}}</h5>\n        <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" disabled>\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n      </div>\n      <div class=\"modal-body\">\n        <form method=\"post\" action=\"{{ route('doc.store',['id' => $document->id] ) }}\" enctype=\"multipart/form-data\"  class=\"dropzone\" id=\"dropzone\">\n          @csrf\n      </form>   \n      </div>\n      <div class=\"modal-footer\">\n        <button type=\"button\" class=\"btn btn-primary\" disabled  data-dismiss=\"modal\" id=\"saveAttachment\">Save changes</button>\n      </div>\n    </div>\n  </div>\n</div> \n\n@endsection\n@push('js')\n\n<script src=\"https://unpkg.com/pdfobject@2.2.7/pdfobject.min.js\"></script>\n{{-- <script>PDFObject.embed(\"/pulic/images/Memorandum No. 152-2022.pdf\", \"#example1\");</script> --}}\n\n<script>\n  PDFObject.embed(\"{{ route('show-pdf', ['id' => $image->id]) }}\", \"#pdf-viewer\");\n  </script>\n\n\n<script type=\"text/javascript\">\n    $(document).ready(function(){\n      $('.datepicker').datepicker({\n        dateFormat: 'yy-mm-dd'\n      });\n    });\n</script>   \n<script src=\"{{ asset('auto.js') }}\"></script>\n{{-- ----------------------------------------------------------------------  --}}\n<script>\n  $(document).ready(function(){\n      $(\"#attach\").click(function(){\n          $(\"#attachmentModal\").modal({\n          backdrop: 'static',\n          keyboard: false\n        });\n      });\n\n      $(\"#saveAttachment\").click(function(){\n        window.location.href = \"{{ route('documents.index')}}\";\n      });\n\n  });\n</script>\n<script type=\"text/javascript\">\n  Dropzone.options.dropzone =\n   {\n      maxFilesize: 12,\n      renameFile: function(file) {\n          var dt = new Date();\n          var time = dt.getTime();\n         return time+file.name;\n      },\n      acceptedFiles: \".jpeg,.jpg,.png,.gif,.pdf\",\n      addRemoveLinks: true,\n      timeout: 50000,\n      removedfile: function(file) \n      {\n          var name = file.upload.filename;\n          $.ajax({\n              headers: {\n                          'X-CSRF-TOKEN': $('meta[name=\"_token\"]').attr('content')\n                      },\n              type: 'POST',\n              url: '{{ route(\"doc.delete\") }}',\n              data: {filename: name},\n              success: function (data){\n                  console.log(\"File has been successfully removed!!\");\n              },\n              error: function(e) {\n                  console.log(e);\n              }});\n              var fileRef;\n              return (fileRef = file.previewElement) != null ? \n              fileRef.parentNode.removeChild(file.previewElement) : void 0;\n      },\n \n      success: function(file, response) \n      {\n          console.log(response);\n          $(\".modal button\").removeAttr(\"disabled\");\n      },\n      error: function(file, response)\n      {\n         return false;\n      }\n};\n</script>\n@endpush\n"
        }
    ]
}