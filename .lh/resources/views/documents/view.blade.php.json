{
    "sourceFile": "resources/views/documents/view.blade.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 56,
            "patches": [
                {
                    "date": 1653275192935,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1653275250193,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,9 +2,9 @@\n @section('content')\n     <div class=\"content\">\n         <div class=\"container-fluid\"> \n             <div class=\"row\">\n-\n+ \n                 <div class=\"col-md-12\">\n                     <div class=\"card form-wrap\">\n                         <div class=\"card-body \">\n                             <main>\n"
                },
                {
                    "date": 1653275893567,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,9 +2,8 @@\n @section('content')\n     <div class=\"content\">\n         <div class=\"container-fluid\"> \n             <div class=\"row\">\n- \n                 <div class=\"col-md-12\">\n                     <div class=\"card form-wrap\">\n                         <div class=\"card-body \">\n                             <main>\n"
                },
                {
                    "date": 1653294353651,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -183,9 +183,9 @@\n                           //     \"targets\": [ 5 ],\n                           //     \"visible\": false,\n                           //     \"searchable\": false\n                           // },\n-                          { orderable: false, targets: [3] }\n+                        //   { orderable: false, targets: [3] }\n                         ]\n           });\n \n           table.columns().iterator('column', function (ctx, idx) {\n"
                },
                {
                    "date": 1653294369182,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -183,9 +183,9 @@\n                           //     \"targets\": [ 5 ],\n                           //     \"visible\": false,\n                           //     \"searchable\": false\n                           // },\n-                        //   { orderable: false, targets: [3] }\n+                          { orderable: false, targets: [2] }\n                         ]\n           });\n \n           table.columns().iterator('column', function (ctx, idx) {\n"
                },
                {
                    "date": 1653294833818,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -173,18 +173,8 @@\n           $(\"#show_all_documents\").html(response);\n           var table = $('#myTable').DataTable({\n             \"order\": [[ 2, \"asc\" ]],\n             columnDefs: [\n-                          // {\n-                          //     \"targets\": [ 0 ],\n-                          //     \"visible\": false,\n-                          //     \"searchable\": false\n-                          // },\n-                          // {\n-                          //     \"targets\": [ 5 ],\n-                          //     \"visible\": false,\n-                          //     \"searchable\": false\n-                          // },\n                           { orderable: false, targets: [2] }\n                         ]\n           });\n \n"
                },
                {
                    "date": 1653295003678,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -133,9 +133,9 @@\n                 'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n             }\n         });\n \n-        // $(\".btn-submitAjax\").click(function(e) {\n+        $(\".btn-submitAjax\").click(function(e) {\n \n         //     e.preventDefault();\n \n         //     var title = $(\"input[name=title]\").val();\n@@ -159,9 +159,9 @@\n         //         error: function(error) {\n         //             console.log(error)\n         //         }\n         //     });\n-        // });\n+        });\n \n // ----------------------------------------------------------------\n fetchAllDocuments();\n \n"
                },
                {
                    "date": 1653352320298,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -135,9 +135,9 @@\n         });\n \n         $(\".btn-submitAjax\").click(function(e) {\n \n-        //     e.preventDefault();\n+            e.preventDefault();\n \n         //     var title = $(\"input[name=title]\").val();\n         //     var details = $(\"input[name=details]\").val();\n         //     var url = '{{ url('postinsert') }}';\n"
                },
                {
                    "date": 1653352516793,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -133,11 +133,12 @@\n                 'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n             }\n         });\n \n-        $(\".btn-submitAjax\").click(function(e) {\n+        $(\"#addRoute\").click(function(e) {\n \n             e.preventDefault();\n+            alert(:hey);\n \n         //     var title = $(\"input[name=title]\").val();\n         //     var details = $(\"input[name=details]\").val();\n         //     var url = '{{ url('postinsert') }}';\n"
                },
                {
                    "date": 1653352524198,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -136,9 +136,9 @@\n \n         $(\"#addRoute\").click(function(e) {\n \n             e.preventDefault();\n-            alert(:hey);\n+            alert(\"here\");\n \n         //     var title = $(\"input[name=title]\").val();\n         //     var details = $(\"input[name=details]\").val();\n         //     var url = '{{ url('postinsert') }}';\n"
                },
                {
                    "date": 1653352601368,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -133,9 +133,10 @@\n                 'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n             }\n         });\n \n-        $(\"#addRoute\").click(function(e) {\n+        $(\"form[name='demoform']\").submit(function(event) {\n+        // $(\"#addRoute\").click(function(e) {\n \n             e.preventDefault();\n             alert(\"here\");\n \n"
                },
                {
                    "date": 1653352644838,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -133,9 +133,9 @@\n                 'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n             }\n         });\n \n-        $(\"form[name='demoform']\").submit(function(event) {\n+        $(\"#add_route_form\").submit(function(event) {\n         // $(\"#addRoute\").click(function(e) {\n \n             e.preventDefault();\n             alert(\"here\");\n"
                },
                {
                    "date": 1653352990537,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -133,9 +133,9 @@\n                 'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n             }\n         });\n \n-        $(\"#add_route_form\").submit(function(event) {\n+        $(\"form[name='demoform']\").submit(function(event) {\n         // $(\"#addRoute\").click(function(e) {\n \n             e.preventDefault();\n             alert(\"here\");\n"
                },
                {
                    "date": 1653353019622,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -133,10 +133,9 @@\n                 'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n             }\n         });\n \n-        $(\"form[name='demoform']\").submit(function(event) {\n-        // $(\"#addRoute\").click(function(e) {\n+        $(\"#addRoute\").click(function(e) {\n \n             e.preventDefault();\n             alert(\"here\");\n \n"
                },
                {
                    "date": 1653353092451,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -136,8 +136,9 @@\n \n         $(\"#addRoute\").click(function(e) {\n \n             e.preventDefault();\n+            formData = $('#add_route_form').serialize();\n             alert(\"here\");\n \n         //     var title = $(\"input[name=title]\").val();\n         //     var details = $(\"input[name=details]\").val();\n"
                },
                {
                    "date": 1653353111116,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -137,9 +137,9 @@\n         $(\"#addRoute\").click(function(e) {\n \n             e.preventDefault();\n             formData = $('#add_route_form').serialize();\n-            alert(\"here\");\n+            console.log(formData);\n \n         //     var title = $(\"input[name=title]\").val();\n         //     var details = $(\"input[name=details]\").val();\n         //     var url = '{{ url('postinsert') }}';\n"
                },
                {
                    "date": 1653354734947,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -137,32 +137,25 @@\n         $(\"#addRoute\").click(function(e) {\n \n             e.preventDefault();\n             formData = $('#add_route_form').serialize();\n-            console.log(formData);\n+            URL = $(\"#add_route_form\").attr('action');\n \n-        //     var title = $(\"input[name=title]\").val();\n-        //     var details = $(\"input[name=details]\").val();\n-        //     var url = '{{ url('postinsert') }}';\n-\n-        //     $.ajax({\n-        //         url: url,\n-        //         method: 'POST',\n-        //         data: {\n-        //             Code: title,\n-        //             Chief: details\n-        //         },\n-        //         success: function(response) {\n-        //             if (response.success) {\n-        //                 alert(response.message) //Message come from controller\n-        //             } else {\n-        //                 alert(\"Error\")\n-        //             }\n-        //         },\n-        //         error: function(error) {\n-        //             console.log(error)\n-        //         }\n-        //     });\n+            $.ajax({\n+                url: URL,\n+                method: 'POST',\n+                data: formData,\n+                success: function(response) {\n+                    if (response.success) {\n+                        alert(response.message) //Message come from controller\n+                    } else {\n+                        alert(\"Error\")\n+                    }\n+                },\n+                error: function(error) {\n+                    console.log(error)\n+                }\n+            });\n         });\n \n // ----------------------------------------------------------------\n fetchAllDocuments();\n"
                },
                {
                    "date": 1653357454789,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -140,8 +140,11 @@\n             formData = $('#add_route_form').serialize();\n             URL = $(\"#add_route_form\").attr('action');\n \n             $.ajax({\n+                headers: {\n+                          'X-CSRF-TOKEN': $('meta[name=\"_token\"]').attr('content')\n+                      },\n                 url: URL,\n                 method: 'POST',\n                 data: formData,\n                 success: function(response) {\n"
                },
                {
                    "date": 1653357621852,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -140,11 +140,9 @@\n             formData = $('#add_route_form').serialize();\n             URL = $(\"#add_route_form\").attr('action');\n \n             $.ajax({\n-                headers: {\n-                          'X-CSRF-TOKEN': $('meta[name=\"_token\"]').attr('content')\n-                      },\n+                \n                 url: URL,\n                 method: 'POST',\n                 data: formData,\n                 success: function(response) {\n"
                },
                {
                    "date": 1653358592783,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -133,14 +133,14 @@\n                 'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n             }\n         });\n \n-        $(\"#addRoute\").click(function(e) {\n+        $(\"form[name='add_route_form']\").submit(function(event) {\n \n-            e.preventDefault();\n+            event.preventDefault();\n+\n+            URL = $(\"#add_route_form\").attr('action');\n             formData = $('#add_route_form').serialize();\n-            URL = $(\"#add_route_form\").attr('action');\n-\n             $.ajax({\n                 \n                 url: URL,\n                 method: 'POST',\n"
                },
                {
                    "date": 1653358611845,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -140,9 +140,9 @@\n \n             URL = $(\"#add_route_form\").attr('action');\n             formData = $('#add_route_form').serialize();\n             $.ajax({\n-                \n+                type: 'POST',\n                 url: URL,\n                 method: 'POST',\n                 data: formData,\n                 success: function(response) {\n"
                },
                {
                    "date": 1653358626174,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -142,9 +142,9 @@\n             formData = $('#add_route_form').serialize();\n             $.ajax({\n                 type: 'POST',\n                 url: URL,\n-                method: 'POST',\n+                // method: 'POST',\n                 data: formData,\n                 success: function(response) {\n                     if (response.success) {\n                         alert(response.message) //Message come from controller\n"
                },
                {
                    "date": 1653358753076,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -136,8 +136,9 @@\n \n         $(\"form[name='add_route_form']\").submit(function(event) {\n \n             event.preventDefault();\n+            alert(\"hey\");\n \n             URL = $(\"#add_route_form\").attr('action');\n             formData = $('#add_route_form').serialize();\n             $.ajax({\n"
                },
                {
                    "date": 1653360575902,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -133,19 +133,18 @@\n                 'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n             }\n         });\n \n-        $(\"form[name='add_route_form']\").submit(function(event) {\n+        $(\"#addRoute\").click(function(e) {\n \n-            event.preventDefault();\n-            alert(\"hey\");\n+            e.preventDefault();\n+            formData = $('#add_route_form').serialize();\n+            URL = $(\"#add_route_form\").attr('action');\n \n-            URL = $(\"#add_route_form\").attr('action');\n-            formData = $('#add_route_form').serialize();\n             $.ajax({\n-                type: 'POST',\n+                \n                 url: URL,\n-                // method: 'POST',\n+                method: 'POST',\n                 data: formData,\n                 success: function(response) {\n                     if (response.success) {\n                         alert(response.message) //Message come from controller\n"
                },
                {
                    "date": 1653361305583,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -139,8 +139,10 @@\n             e.preventDefault();\n             formData = $('#add_route_form').serialize();\n             URL = $(\"#add_route_form\").attr('action');\n \n+            console.log(formData);\n+\n             $.ajax({\n                 \n                 url: URL,\n                 method: 'POST',\n"
                },
                {
                    "date": 1653361708832,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -136,11 +136,14 @@\n \n         $(\"#addRoute\").click(function(e) {\n \n             e.preventDefault();\n+            let _token   = $('meta[name=\"csrf-token\"]').attr('content');\n             formData = $('#add_route_form').serialize();\n+            formData.push({name: \"_token\", value: _token});\n             URL = $(\"#add_route_form\").attr('action');\n-\n+           \n+            \n             console.log(formData);\n \n             $.ajax({\n                 \n"
                },
                {
                    "date": 1653361818731,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -137,9 +137,9 @@\n         $(\"#addRoute\").click(function(e) {\n \n             e.preventDefault();\n             let _token   = $('meta[name=\"csrf-token\"]').attr('content');\n-            formData = $('#add_route_form').serialize();\n+            formData = $('#add_route_form').serializeArray();\n             formData.push({name: \"_token\", value: _token});\n             URL = $(\"#add_route_form\").attr('action');\n            \n             \n"
                },
                {
                    "date": 1653361896331,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -141,10 +141,11 @@\n             formData = $('#add_route_form').serializeArray();\n             formData.push({name: \"_token\", value: _token});\n             URL = $(\"#add_route_form\").attr('action');\n            \n+\n             \n-            console.log(formData);\n+            console.log(_token);\n \n             $.ajax({\n                 \n                 url: URL,\n"
                },
                {
                    "date": 1653361998615,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -136,19 +136,12 @@\n \n         $(\"#addRoute\").click(function(e) {\n \n             e.preventDefault();\n-            let _token   = $('meta[name=\"csrf-token\"]').attr('content');\n-            formData = $('#add_route_form').serializeArray();\n-            formData.push({name: \"_token\", value: _token});\n+            formData = $('#add_route_form').serialize();\n             URL = $(\"#add_route_form\").attr('action');\n-           \n \n-            \n-            console.log(_token);\n-\n             $.ajax({\n-                \n                 url: URL,\n                 method: 'POST',\n                 data: formData,\n                 success: function(response) {\n"
                },
                {
                    "date": 1653362200019,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,8 @@\n @extends('layouts.app', ['activePage' => 'dashboard', 'titlePage' => __('Document')])\n @section('content')\n     <div class=\"content\">\n-        <div class=\"container-fluid\"> \n+        <div class=\"container-fluid\">\n             <div class=\"row\">\n                 <div class=\"col-md-12\">\n                     <div class=\"card form-wrap\">\n                         <div class=\"card-body \">\n@@ -16,10 +16,10 @@\n                                                         {{ __('Control #: ') . $document->control_number }}</h6>\n                                                     <small class=\"text-muted\">{{ __('As of ') . now() }}</small>\n                                                     {{-- <p><span class=\"text-muted\">{{ $document->get_status() }}</span></p> --}}\n                                                 </div>\n-                                                \n \n+\n                                             </li>\n                                             <li class=\"list-group-item d-flex justify-content-between lh-sm\">\n                                                 <div>\n                                                     <h6 class=\"my-0\">{{ __('Date Received') }}</h6>\n@@ -30,10 +30,9 @@\n                                             <li\n                                                 class=\"list-group-item d-flex justify-content-between lh-sm bg-{{ $document->expired() }} deadline\">\n                                                 <div>\n                                                     <h6 class=\"my-0\">{{ __('Deadline / Schedule') }}</h6>\n-                                                    <small\n-                                                        class=\"text-muted\">{{ $document->required_action }}</small>\n+                                                    <small class=\"text-muted\">{{ $document->required_action }}</small>\n                                                 </div>\n                                                 <span class=\"text-muted\">{{ $document->deadline }}</span>\n                                             </li>\n                                             <li class=\"list-group-item d-flex justify-content-between lh-sm\">\n@@ -72,24 +71,28 @@\n                                         </ul>\n                                     </div>\n                                     <div class=\"col-md-7 col-lg-8\">\n                                         <div class=\"card shadow\">\n-                                          <div class=\"card-header card-header-primary d-flex justify-content-between align-items-center\">\n-                                            <h3 class=\"text-light\">{{ __('Routes - ' . $document->subject . \" (\".$document->origin_office->name.\")\")}}</h3>\n-                                            {{-- <button type=\"button\"  class=\"btn btn-light\"  data-toggle=\"modal\" data-target=\"#addDocumentModal\"> --}}\n-                                            <button type=\"button\"  class=\"btn btn-light\"  data-toggle=\"modal\" data-target=\"#addRouteModal\">\n-                                              <i class=\"bi-plus-circle me-2\"></i> Add</button>\n-                                          </div>\n-                                          \n-                                          <div class=\"card-body \" id=\"show_all_documents\">\n-                                            @include('layouts.components.loader')\n-                                           \n-                                          </div>\n+                                            <div\n+                                                class=\"card-header card-header-primary d-flex justify-content-between align-items-center\">\n+                                                <h3 class=\"text-light\">\n+                                                    {{ __('Routes - ' . $document->subject . ' (' . $document->origin_office->name . ')') }}\n+                                                </h3>\n+                                                {{-- <button type=\"button\"  class=\"btn btn-light\"  data-toggle=\"modal\" data-target=\"#addDocumentModal\"> --}}\n+                                                <button type=\"button\" class=\"btn btn-light\" data-toggle=\"modal\"\n+                                                    data-target=\"#addRouteModal\">\n+                                                    <i class=\"bi-plus-circle me-2\"></i> Add</button>\n+                                            </div>\n+\n+                                            <div class=\"card-body \" id=\"show_all_documents\">\n+                                                @include('layouts.components.loader')\n+\n+                                            </div>\n                                         </div>\n                                     </div>\n                                 </div>\n-                        </main>\n-                      </div>\n+                            </main>\n+                        </div>\n                         <div id=\"example1\"></div>\n \n                     </div>\n \n@@ -101,9 +104,8 @@\n     </div>\n \n     @include('modal.view_pdf')\n     @include('modal.add_route')\n-\n @endsection\n @push('js')\n     <script src=\"https://unpkg.com/pdfobject@2.2.7/pdfobject.min.js\"></script>\n     <script>\n@@ -136,11 +138,15 @@\n \n         $(\"#addRoute\").click(function(e) {\n \n             e.preventDefault();\n-            formData = $('#add_route_form').serialize();\n+            // formData = $('#add_route_form').serialize();\n             URL = $(\"#add_route_form\").attr('action');\n \n+            var name = $(\"input[name=date_received]\").val();\n+            var password = $(\"input[name=employee_id]\").val();\n+            var email = $(\"input[name=division_id]\").val();\n+\n             $.ajax({\n                 url: URL,\n                 method: 'POST',\n                 data: formData,\n@@ -156,28 +162,31 @@\n                 }\n             });\n         });\n \n-// ----------------------------------------------------------------\n-fetchAllDocuments();\n+        // ----------------------------------------------------------------\n+        fetchAllDocuments();\n \n-    function fetchAllDocuments() {\n-      $.ajax({\n-        url: '{{ route('fetchAllRoute') }}',\n-        method: 'get',\n-        success: function(response) {\n-          $(\"#show_all_documents\").html(response);\n-          var table = $('#myTable').DataTable({\n-            \"order\": [[ 2, \"asc\" ]],\n-            columnDefs: [\n-                          { orderable: false, targets: [2] }\n-                        ]\n-          });\n+        function fetchAllDocuments() {\n+            $.ajax({\n+                url: '{{ route('fetchAllRoute') }}',\n+                method: 'get',\n+                success: function(response) {\n+                    $(\"#show_all_documents\").html(response);\n+                    var table = $('#myTable').DataTable({\n+                        \"order\": [\n+                            [2, \"asc\"]\n+                        ],\n+                        columnDefs: [{\n+                            orderable: false,\n+                            targets: [2]\n+                        }]\n+                    });\n \n-          table.columns().iterator('column', function (ctx, idx) {\n-          $(table.column(idx).header()).prepend('<span class=\"sort-icon\"/>');\n-    });\n+                    table.columns().iterator('column', function(ctx, idx) {\n+                        $(table.column(idx).header()).prepend('<span class=\"sort-icon\"/>');\n+                    });\n+                }\n+            });\n         }\n-      });\n-    }\n     </script>\n @endpush\n"
                },
                {
                    "date": 1653362235381,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -146,11 +146,12 @@\n             var password = $(\"input[name=employee_id]\").val();\n             var email = $(\"input[name=division_id]\").val();\n \n             $.ajax({\n+                type:'POST',\n                 url: URL,\n-                method: 'POST',\n-                data: formData,\n+                // data: formData,\n+                data:{name:name, password:password, email:email},\n                 success: function(response) {\n                     if (response.success) {\n                         alert(response.message) //Message come from controller\n                     } else {\n"
                },
                {
                    "date": 1653362540170,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -147,9 +147,9 @@\n             var email = $(\"input[name=division_id]\").val();\n \n             $.ajax({\n                 type:'POST',\n-                url: URL,\n+                url: \"{{ route('docroutes.create')}}\",\n                 // data: formData,\n                 data:{name:name, password:password, email:email},\n                 success: function(response) {\n                     if (response.success) {\n"
                },
                {
                    "date": 1653364124307,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -146,12 +146,21 @@\n             var password = $(\"input[name=employee_id]\").val();\n             var email = $(\"input[name=division_id]\").val();\n \n             $.ajax({\n-                type:'POST',\n-                url: \"{{ route('docroutes.create')}}\",\n+                type: 'POST',\n+                url: \"{{ route('docroutes.create') }}\",\n                 // data: formData,\n-                data:{name:name, password:password, email:email},\n+                data: {\n+                    date_received: date_received,\n+                    doc_id: doc_id,\n+                    employee_id: employee_id,\n+                    action: action,\n+                    employee_id: employee_id,\n+                    division_id: division_id,\n+\n+\n+                },\n                 success: function(response) {\n                     if (response.success) {\n                         alert(response.message) //Message come from controller\n                     } else {\n"
                },
                {
                    "date": 1653364267389,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -141,20 +141,21 @@\n             e.preventDefault();\n             // formData = $('#add_route_form').serialize();\n             URL = $(\"#add_route_form\").attr('action');\n \n-            var name = $(\"input[name=date_received]\").val();\n-            var password = $(\"input[name=employee_id]\").val();\n-            var email = $(\"input[name=division_id]\").val();\n+            var date_received = $(\"input[name=date_received]\").val();\n+            var doc_id = $(\"input[name=doc_id]\").val();\n+            var employee_id = $(\"input[name=employee_id]\").val();\n+            var division_id = $(\"input[name=division_id]\").val();\n+            var action = $(\"textarea[name=action]\").val();\n \n             $.ajax({\n                 type: 'POST',\n                 url: \"{{ route('docroutes.create') }}\",\n                 // data: formData,\n                 data: {\n                     date_received: date_received,\n                     doc_id: doc_id,\n-                    employee_id: employee_id,\n                     action: action,\n                     employee_id: employee_id,\n                     division_id: division_id,\n \n"
                },
                {
                    "date": 1653364803880,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -147,32 +147,32 @@\n             var employee_id = $(\"input[name=employee_id]\").val();\n             var division_id = $(\"input[name=division_id]\").val();\n             var action = $(\"textarea[name=action]\").val();\n \n-            $.ajax({\n-                type: 'POST',\n-                url: \"{{ route('docroutes.create') }}\",\n-                // data: formData,\n-                data: {\n-                    date_received: date_received,\n-                    doc_id: doc_id,\n-                    action: action,\n-                    employee_id: employee_id,\n-                    division_id: division_id,\n+            // $.ajax({\n+            //     type: 'POST',\n+            //     url: \"{{ route('docroutes.create') }}\",\n+            //     // data: formData,\n+            //     data: {\n+            //         date_received: date_received,\n+            //         doc_id: doc_id,\n+            //         action: action,\n+            //         employee_id: employee_id,\n+            //         division_id: division_id,\n \n \n-                },\n-                success: function(response) {\n-                    if (response.success) {\n-                        alert(response.message) //Message come from controller\n-                    } else {\n-                        alert(\"Error\")\n-                    }\n-                },\n-                error: function(error) {\n-                    console.log(error)\n-                }\n-            });\n+            //     },\n+            //     success: function(response) {\n+            //         if (response.success) {\n+            //             alert(response.message) //Message come from controller\n+            //         } else {\n+            //             alert(\"Error\")\n+            //         }\n+            //     },\n+            //     error: function(error) {\n+            //         console.log(error)\n+            //     }\n+            // });\n         });\n \n         // ----------------------------------------------------------------\n         fetchAllDocuments();\n"
                },
                {
                    "date": 1653364850622,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -147,32 +147,32 @@\n             var employee_id = $(\"input[name=employee_id]\").val();\n             var division_id = $(\"input[name=division_id]\").val();\n             var action = $(\"textarea[name=action]\").val();\n \n-            // $.ajax({\n-            //     type: 'POST',\n-            //     url: \"{{ route('docroutes.create') }}\",\n-            //     // data: formData,\n-            //     data: {\n-            //         date_received: date_received,\n-            //         doc_id: doc_id,\n-            //         action: action,\n-            //         employee_id: employee_id,\n-            //         division_id: division_id,\n+            $.ajax({\n+                type: 'POST',\n+                url: \"{{ route('docroutes.create') }}\",\n+                // data: formData,\n+                data: {\n+                    date_received: date_received,\n+                    doc_id: doc_id,\n+                    action: action,\n+                    employee_id: employee_id,\n+                    division_id: division_id,\n \n \n-            //     },\n-            //     success: function(response) {\n-            //         if (response.success) {\n-            //             alert(response.message) //Message come from controller\n-            //         } else {\n-            //             alert(\"Error\")\n-            //         }\n-            //     },\n-            //     error: function(error) {\n-            //         console.log(error)\n-            //     }\n-            // });\n+                },\n+                success: function(response) {\n+                    if (response.success) {\n+                        alert(response.message) //Message come from controller\n+                    } else {\n+                        alert(\"Error\")\n+                    }\n+                },\n+                error: function(error) {\n+                    console.log(error)\n+                }\n+            });\n         });\n \n         // ----------------------------------------------------------------\n         fetchAllDocuments();\n"
                },
                {
                    "date": 1653370717901,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -161,10 +161,10 @@\n \n \n                 },\n                 success: function(response) {\n-                    if (response.success) {\n-                        alert(response.message) //Message come from controller\n+                    if (response.status) {\n+                        alert(response.status) //Message come from controller\n                     } else {\n                         alert(\"Error\")\n                     }\n                 },\n"
                },
                {
                    "date": 1653371136164,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -157,10 +157,8 @@\n                     doc_id: doc_id,\n                     action: action,\n                     employee_id: employee_id,\n                     division_id: division_id,\n-\n-\n                 },\n                 success: function(response) {\n                     if (response.status) {\n                         alert(response.status) //Message come from controller\n"
                },
                {
                    "date": 1653371253196,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -172,11 +172,11 @@\n             });\n         });\n \n         // ----------------------------------------------------------------\n-        fetchAllDocuments();\n+        fetchAllRoutes();\n \n-        function fetchAllDocuments() {\n+        function fetchAllRoutes() {\n             $.ajax({\n                 url: '{{ route('fetchAllRoute') }}',\n                 method: 'get',\n                 success: function(response) {\n"
                },
                {
                    "date": 1653371571790,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -138,8 +138,9 @@\n \n         $(\"#addRoute\").click(function(e) {\n \n             e.preventDefault();\n+            $(this).text('Updating...');\n             // formData = $('#add_route_form').serialize();\n             URL = $(\"#add_route_form\").attr('action');\n \n             var date_received = $(\"input[name=date_received]\").val();\n@@ -159,13 +160,25 @@\n                     employee_id: employee_id,\n                     division_id: division_id,\n                 },\n                 success: function(response) {\n-                    if (response.status) {\n-                        alert(response.status) //Message come from controller\n-                    } else {\n-                        alert(\"Error\")\n+                    // if (response.status) {\n+                    //     alert(response.status) //Message come from controller\n+                    // } else {\n+                    //     alert(\"Error\")\n+                    // }\n+\n+                    if (response.status == \"success\") {\n+                        Swal.fire(\n+                            'Updated!',\n+                            'Document Route Updated Successfully!',\n+                            'success'\n+                        )\n+                        fetchAllDocuments();\n                     }\n+                    $(\"#addRouteModal\").modal('hide');\n+                    $(\"button#addRoute\").text('Update Document');\n+                    $(\"#add_route_form\")[0].reset();\n                 },\n                 error: function(error) {\n                     console.log(error)\n                 }\n"
                },
                {
                    "date": 1653371628366,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -172,9 +172,9 @@\n                             'Updated!',\n                             'Document Route Updated Successfully!',\n                             'success'\n                         )\n-                        fetchAllDocuments();\n+                        fetchAllRoutes();\n                     }\n                     $(\"#addRouteModal\").modal('hide');\n                     $(\"button#addRoute\").text('Update Document');\n                     $(\"#add_route_form\")[0].reset();\n"
                },
                {
                    "date": 1653371654085,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -195,9 +195,9 @@\n                 success: function(response) {\n                     $(\"#show_all_documents\").html(response);\n                     var table = $('#myTable').DataTable({\n                         \"order\": [\n-                            [2, \"asc\"]\n+                            [1, \"asc\"]\n                         ],\n                         columnDefs: [{\n                             orderable: false,\n                             targets: [2]\n"
                },
                {
                    "date": 1653371672123,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -195,9 +195,9 @@\n                 success: function(response) {\n                     $(\"#show_all_documents\").html(response);\n                     var table = $('#myTable').DataTable({\n                         \"order\": [\n-                            [1, \"asc\"]\n+                            [1, \"desc\"]\n                         ],\n                         columnDefs: [{\n                             orderable: false,\n                             targets: [2]\n"
                },
                {
                    "date": 1653373495168,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -189,9 +189,9 @@\n         fetchAllRoutes();\n \n         function fetchAllRoutes() {\n             $.ajax({\n-                url: '{{ route('fetchAllRoute') }}',\n+                url: '{{ route('fetchAllRoute',26) }}',\n                 method: 'get',\n                 success: function(response) {\n                     $(\"#show_all_documents\").html(response);\n                     var table = $('#myTable').DataTable({\n"
                },
                {
                    "date": 1653374502832,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -189,9 +189,9 @@\n         fetchAllRoutes();\n \n         function fetchAllRoutes() {\n             $.ajax({\n-                url: '{{ route('fetchAllRoute',26) }}',\n+                url: '{{ route('fetchAllRoute/26') }}',\n                 method: 'get',\n                 success: function(response) {\n                     $(\"#show_all_documents\").html(response);\n                     var table = $('#myTable').DataTable({\n"
                },
                {
                    "date": 1653374526324,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -189,9 +189,9 @@\n         fetchAllRoutes();\n \n         function fetchAllRoutes() {\n             $.ajax({\n-                url: '{{ route('fetchAllRoute/26') }}',\n+                url: '{{ route('fetchAllRoute',26) }}',\n                 method: 'get',\n                 success: function(response) {\n                     $(\"#show_all_documents\").html(response);\n                     var table = $('#myTable').DataTable({\n"
                },
                {
                    "date": 1653374650277,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -189,9 +189,9 @@\n         fetchAllRoutes();\n \n         function fetchAllRoutes() {\n             $.ajax({\n-                url: '{{ route('fetchAllRoute',26) }}',\n+                url: '{{ route('fetchAllRoute',$document->id) }}',\n                 method: 'get',\n                 success: function(response) {\n                     $(\"#show_all_documents\").html(response);\n                     var table = $('#myTable').DataTable({\n"
                },
                {
                    "date": 1653379536740,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -160,14 +160,8 @@\n                     employee_id: employee_id,\n                     division_id: division_id,\n                 },\n                 success: function(response) {\n-                    // if (response.status) {\n-                    //     alert(response.status) //Message come from controller\n-                    // } else {\n-                    //     alert(\"Error\")\n-                    // }\n-\n                     if (response.status == \"success\") {\n                         Swal.fire(\n                             'Updated!',\n                             'Document Route Updated Successfully!',\n"
                },
                {
                    "date": 1653379546794,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -139,9 +139,8 @@\n         $(\"#addRoute\").click(function(e) {\n \n             e.preventDefault();\n             $(this).text('Updating...');\n-            // formData = $('#add_route_form').serialize();\n             URL = $(\"#add_route_form\").attr('action');\n \n             var date_received = $(\"input[name=date_received]\").val();\n             var doc_id = $(\"input[name=doc_id]\").val();\n@@ -151,9 +150,8 @@\n \n             $.ajax({\n                 type: 'POST',\n                 url: \"{{ route('docroutes.create') }}\",\n-                // data: formData,\n                 data: {\n                     date_received: date_received,\n                     doc_id: doc_id,\n                     action: action,\n"
                },
                {
                    "date": 1653379556930,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -62,13 +62,10 @@\n                                                                     class=\"material-icons text-danger\">attachment</i>{{ $image->image_path }}\n                                                             </a>\n                                                         </li>\n                                                     @endforeach\n-\n                                                 </ul>\n-\n                                             </li>\n-\n                                         </ul>\n                                     </div>\n                                     <div class=\"col-md-7 col-lg-8\">\n                                         <div class=\"card shadow\">\n@@ -181,9 +178,9 @@\n         fetchAllRoutes();\n \n         function fetchAllRoutes() {\n             $.ajax({\n-                url: '{{ route('fetchAllRoute',$document->id) }}',\n+                url: '{{ route('fetchAllRoute', $document->id) }}',\n                 method: 'get',\n                 success: function(response) {\n                     $(\"#show_all_documents\").html(response);\n                     var table = $('#myTable').DataTable({\n"
                },
                {
                    "date": 1653379578620,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -101,8 +101,9 @@\n     </div>\n \n     @include('modal.view_pdf')\n     @include('modal.add_route')\n+    @include('modal.edit_route')\n @endsection\n @push('js')\n     <script src=\"https://unpkg.com/pdfobject@2.2.7/pdfobject.min.js\"></script>\n     <script>\n"
                },
                {
                    "date": 1653379603350,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -73,9 +73,8 @@\n                                                 class=\"card-header card-header-primary d-flex justify-content-between align-items-center\">\n                                                 <h3 class=\"text-light\">\n                                                     {{ __('Routes - ' . $document->subject . ' (' . $document->origin_office->name . ')') }}\n                                                 </h3>\n-                                                {{-- <button type=\"button\"  class=\"btn btn-light\"  data-toggle=\"modal\" data-target=\"#addDocumentModal\"> --}}\n                                                 <button type=\"button\" class=\"btn btn-light\" data-toggle=\"modal\"\n                                                     data-target=\"#addRouteModal\">\n                                                     <i class=\"bi-plus-circle me-2\"></i> Add</button>\n                                             </div>\n"
                },
                {
                    "date": 1653380016233,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -173,8 +173,39 @@\n                 }\n             });\n         });\n \n+// ----------------------- edit -------------------------------------------\n+$(document).on('click', '.editIcon', function(e) {\n+            e.preventDefault();\n+\n+            let id = $(this).attr('id');\n+            $.ajax({\n+                url: \"{{ route('edit.doc_route') }}\",\n+                method: 'get',\n+                data: {\n+                    id: id,\n+                    _token: '{{ csrf_token() }}'\n+                },\n+                success: function(response) {\n+\n+                    dr = response[0].date_received;\n+                    for (let x in response[0]) {\n+\n+                        var el = document.querySelector('#updateDocument');\n+                        el.setAttribute('data-id', id);\n+\n+                        if (x.search(\"_id\") < 0) $(\"#editDocumentModal #\" + x).val(response[0][x]);\n+                        else {\n+                            name = x.replace('_id', '');\n+\n+                            $(\"#editDocumentModal input[name='\" + x + \"'\").val(response[0][x]);\n+                            $(\"#editDocumentModal #\" + x).val(response[name]);\n+                        }\n+                    }\n+                }\n+            });\n+        });        \n         // ----------------------------------------------------------------\n         fetchAllRoutes();\n \n         function fetchAllRoutes() {\n"
                },
                {
                    "date": 1653380187998,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -179,9 +179,9 @@\n             e.preventDefault();\n \n             let id = $(this).attr('id');\n             $.ajax({\n-                url: \"{{ route('edit.doc_route') }}\",\n+                url: \"{{ route('edit.doc_route', $document->id) }}\",\n                 method: 'get',\n                 data: {\n                     id: id,\n                     _token: '{{ csrf_token() }}'\n"
                },
                {
                    "date": 1653380521670,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -179,9 +179,9 @@\n             e.preventDefault();\n \n             let id = $(this).attr('id');\n             $.ajax({\n-                url: \"{{ route('edit.doc_route', $document->id) }}\",\n+                url: \"{{ route('edit.doc_route') }}\",\n                 method: 'get',\n                 data: {\n                     id: id,\n                     _token: '{{ csrf_token() }}'\n"
                },
                {
                    "date": 1653382906020,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -193,14 +193,14 @@\n \n                         var el = document.querySelector('#updateDocument');\n                         el.setAttribute('data-id', id);\n \n-                        if (x.search(\"_id\") < 0) $(\"#editDocumentModal #\" + x).val(response[0][x]);\n+                        if (x.search(\"_id\") < 0) $(\"#editRouteModal #\" + x).val(response[0][x]);\n                         else {\n                             name = x.replace('_id', '');\n \n-                            $(\"#editDocumentModal input[name='\" + x + \"'\").val(response[0][x]);\n-                            $(\"#editDocumentModal #\" + x).val(response[name]);\n+                            $(\"#editRouteModal input[name='\" + x + \"'\").val(response[0][x]);\n+                            $(\"#editRouteModal #\" + x).val(response[name]);\n                         }\n                     }\n                 }\n             });\n"
                },
                {
                    "date": 1653382937466,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -188,8 +188,9 @@\n                 },\n                 success: function(response) {\n \n                     dr = response[0].date_received;\n+                    console.log(response);\n                     for (let x in response[0]) {\n \n                         var el = document.querySelector('#updateDocument');\n                         el.setAttribute('data-id', id);\n"
                }
            ],
            "date": 1653275192935,
            "name": "Commit-0",
            "content": "@extends('layouts.app', ['activePage' => 'dashboard', 'titlePage' => __('Document')])\n@section('content')\n    <div class=\"content\">\n        <div class=\"container-fluid\"> \n            <div class=\"row\">\n\n                <div class=\"col-md-12\">\n                    <div class=\"card form-wrap\">\n                        <div class=\"card-body \">\n                            <main>\n                                <div class=\"row g-5\">\n                                    <div class=\"col-md-5 col-lg-4 order-md-last\">\n                                        <ul class=\"list-group mb-3\">\n                                            <li class=\"list-group-item d-flex justify-content-between lh-sm\">\n                                                <div>\n                                                    <h6 class=\"my-0\">\n                                                        {{ __('Control #: ') . $document->control_number }}</h6>\n                                                    <small class=\"text-muted\">{{ __('As of ') . now() }}</small>\n                                                    {{-- <p><span class=\"text-muted\">{{ $document->get_status() }}</span></p> --}}\n                                                </div>\n                                                \n\n                                            </li>\n                                            <li class=\"list-group-item d-flex justify-content-between lh-sm\">\n                                                <div>\n                                                    <h6 class=\"my-0\">{{ __('Date Received') }}</h6>\n                                                    <small class=\"text-muted\">{{ $document->action_taken }}</small>\n                                                </div>\n                                                <span class=\"text-muted\">{{ $document->date_received }}</span>\n                                            </li>\n                                            <li\n                                                class=\"list-group-item d-flex justify-content-between lh-sm bg-{{ $document->expired() }} deadline\">\n                                                <div>\n                                                    <h6 class=\"my-0\">{{ __('Deadline / Schedule') }}</h6>\n                                                    <small\n                                                        class=\"text-muted\">{{ $document->required_action }}</small>\n                                                </div>\n                                                <span class=\"text-muted\">{{ $document->deadline }}</span>\n                                            </li>\n                                            <li class=\"list-group-item d-flex justify-content-between lh-sm\">\n                                                <div>\n                                                    <h6 class=\"my-0 text-primary \">{{ $document->employee->fullname() }}\n                                                    </h6>\n                                                    <small\n                                                        class=\"text-success\">{{ $document->origin_office->name }}</small>\n                                                </div>\n                                                <span class=\"text-muted\">Focal</span>\n                                            </li>\n                                            <li class=\"list-group-item d-flex justify-content-between lh-sm\">\n                                                <div>\n                                                    <h6 class=\"my-0\">{{ __('Means of Receiving') }}</h6>\n                                                    <small class=\"my-0\">{{ $document->doctype->name }}</small>\n                                                </div>\n                                                <span\n                                                    class=\"text-muted\">{{ $document->meansOfReceiving->name }}</span>\n                                            </li>\n                                            <li class=\"list-group-item d-flex justify-content-between lh-sm\">\n                                                <ul class=\"list-group\">\n                                                    @foreach ($images as $image)\n                                                        <li class=\"list-group-item\">\n                                                            <a href=\"#\" class=\"\" data-toggle=\"modal\"\n                                                                data-target=\"#viewPDFModal\">\n                                                                <i\n                                                                    class=\"material-icons text-danger\">attachment</i>{{ $image->image_path }}\n                                                            </a>\n                                                        </li>\n                                                    @endforeach\n\n                                                </ul>\n\n                                            </li>\n\n                                        </ul>\n                                    </div>\n                                    <div class=\"col-md-7 col-lg-8\">\n                                        <div class=\"card shadow\">\n                                          <div class=\"card-header card-header-primary d-flex justify-content-between align-items-center\">\n                                            <h3 class=\"text-light\">{{ __('Routes - ' . $document->subject . \" (\".$document->origin_office->name.\")\")}}</h3>\n                                            {{-- <button type=\"button\"  class=\"btn btn-light\"  data-toggle=\"modal\" data-target=\"#addDocumentModal\"> --}}\n                                            <button type=\"button\"  class=\"btn btn-light\"  data-toggle=\"modal\" data-target=\"#addRouteModal\">\n                                              <i class=\"bi-plus-circle me-2\"></i> Add</button>\n                                          </div>\n                                          \n                                          <div class=\"card-body \" id=\"show_all_documents\">\n                                            @include('layouts.components.loader')\n                                           \n                                          </div>\n                                        </div>\n                                    </div>\n                                </div>\n                        </main>\n                      </div>\n                        <div id=\"example1\"></div>\n\n                    </div>\n\n                </div>\n            </div>\n        </div>\n\n    </div>\n    </div>\n\n    @include('modal.view_pdf')\n    @include('modal.add_route')\n\n@endsection\n@push('js')\n    <script src=\"https://unpkg.com/pdfobject@2.2.7/pdfobject.min.js\"></script>\n    <script>\n        PDFObject.embed(\"{{ route('show-pdf', ['id' => $image->id]) }}\", \"#pdf-viewer\");\n    </script>\n\n\n    <script type=\"text/javascript\">\n        $(function() {\n            $('.datepicker').datepicker();\n        });\n    </script>\n    <script src=\"{{ asset('auto.js') }}\"></script>\n\n    <script>\n        var tabEl = document.querySelector('button[data-bs-toggle=\"tab\"]')\n        tabEl.addEventListener('shown.bs.tab', function(event) {\n            event.target // newly activated tab\n            event.relatedTarget // previous active tab\n        })\n    </script>\n\n\n    <script type=\"text/javascript\">\n        $.ajaxSetup({\n            headers: {\n                'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n            }\n        });\n\n        // $(\".btn-submitAjax\").click(function(e) {\n\n        //     e.preventDefault();\n\n        //     var title = $(\"input[name=title]\").val();\n        //     var details = $(\"input[name=details]\").val();\n        //     var url = '{{ url('postinsert') }}';\n\n        //     $.ajax({\n        //         url: url,\n        //         method: 'POST',\n        //         data: {\n        //             Code: title,\n        //             Chief: details\n        //         },\n        //         success: function(response) {\n        //             if (response.success) {\n        //                 alert(response.message) //Message come from controller\n        //             } else {\n        //                 alert(\"Error\")\n        //             }\n        //         },\n        //         error: function(error) {\n        //             console.log(error)\n        //         }\n        //     });\n        // });\n\n// ----------------------------------------------------------------\nfetchAllDocuments();\n\n    function fetchAllDocuments() {\n      $.ajax({\n        url: '{{ route('fetchAllRoute') }}',\n        method: 'get',\n        success: function(response) {\n          $(\"#show_all_documents\").html(response);\n          var table = $('#myTable').DataTable({\n            \"order\": [[ 2, \"asc\" ]],\n            columnDefs: [\n                          // {\n                          //     \"targets\": [ 0 ],\n                          //     \"visible\": false,\n                          //     \"searchable\": false\n                          // },\n                          // {\n                          //     \"targets\": [ 5 ],\n                          //     \"visible\": false,\n                          //     \"searchable\": false\n                          // },\n                          { orderable: false, targets: [3] }\n                        ]\n          });\n\n          table.columns().iterator('column', function (ctx, idx) {\n          $(table.column(idx).header()).prepend('<span class=\"sort-icon\"/>');\n    });\n        }\n      });\n    }\n    </script>\n@endpush\n"
        }
    ]
}