{
    "sourceFile": "resources/views/layouts/document/add.blade.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 4,
            "patches": [
                {
                    "date": 1653353495490,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1653353503216,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,9 @@\n     data-bs-backdrop=\"static\" aria-hidden=\"true\">\r\n     <div class=\"modal-dialog\" role=\"document\">\r\n         <div class=\"modal-content card shadow\">\r\n             <div class=\"modal-header card-header card-header-primary d-flex justify-content-between align-items-center\">\r\n-                <h5 class=\"modal-title\">{{ __('ADD Document..') }}</h5>\r\n+                <h5 class=\"modal-title\">{{ __('ADD Document') }}</h5>\r\n                 <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                     <span aria-hidden=\"true\">&times;</span>\r\n                 </button>\r\n             </div>\r\n"
                },
                {
                    "date": 1653358053496,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -130,9 +130,9 @@\n                         formData = $('#docform').serialize();\r\n                         $(\"button[type='submit']\").text('Adding...');\r\n \r\n                         $.ajax({\r\n-                            type: 'POST',\r\n+                            method: 'POST',\r\n                             url: URL,\r\n                             data: formData,\r\n                             success: function(result) {\r\n                                 \r\n"
                },
                {
                    "date": 1653358555353,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -122,13 +122,13 @@\n                 // The setting up of the dropzone\r\n                 init: function() {\r\n                     var myDropzone = this;\r\n                     //form submission code goes here\r\n-                    $(\"form[name='docform']\").submit(function(event) {\r\n+                    $(\"form[name='add_route_form']\").submit(function(event) {\r\n                         //Make sure that the form isn't actully being sent.\r\n                         event.preventDefault();\r\n-                        URL = $(\"#docform\").attr('action');\r\n-                        formData = $('#docform').serialize();\r\n+                        URL = $(\"#add_route_form\").attr('action');\r\n+                        formData = $('#add_route_form').serialize();\r\n                         $(\"button[type='submit']\").text('Adding...');\r\n \r\n                         $.ajax({\r\n                             method: 'POST',\r\n"
                },
                {
                    "date": 1653358562453,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -122,17 +122,17 @@\n                 // The setting up of the dropzone\r\n                 init: function() {\r\n                     var myDropzone = this;\r\n                     //form submission code goes here\r\n-                    $(\"form[name='add_route_form']\").submit(function(event) {\r\n+                    $(\"form[name='docform']\").submit(function(event) {\r\n                         //Make sure that the form isn't actully being sent.\r\n                         event.preventDefault();\r\n-                        URL = $(\"#add_route_form\").attr('action');\r\n-                        formData = $('#add_route_form').serialize();\r\n+                        URL = $(\"#docform\").attr('action');\r\n+                        formData = $('#docform').serialize();\r\n                         $(\"button[type='submit']\").text('Adding...');\r\n \r\n                         $.ajax({\r\n-                            method: 'POST',\r\n+                            type: 'POST',\r\n                             url: URL,\r\n                             data: formData,\r\n                             success: function(result) {\r\n                                 \r\n"
                }
            ],
            "date": 1653353495490,
            "name": "Commit-0",
            "content": "{{-- add new Document modal start --}}\r\n\r\n<div class=\"modal fade\" id=\"addDocumentModal\" tabindex=\"-1\" aria-labelledby=\"exampleModalLabel\"\r\n    data-bs-backdrop=\"static\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog\" role=\"document\">\r\n        <div class=\"modal-content card shadow\">\r\n            <div class=\"modal-header card-header card-header-primary d-flex justify-content-between align-items-center\">\r\n                <h5 class=\"modal-title\">{{ __('ADD Document..') }}</h5>\r\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                    <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n            </div>\r\n            <div class=\"modal-body\">\r\n\r\n\r\n                <form method=\"post\" name=\"docform\" id=\"docform\" action=\"{{ route('storeAjax') }}\"\r\n                    enctype=\"multipart/form-data\">\r\n                    @csrf\r\n                    <input type=\"hidden\" class=\"document_id\" name=\"document_id\" id=\"document_id\" value=\"\">\r\n                    <div class=\"row\">\r\n                        <div class=\"col-sm-6\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col\">\r\n                                    <input type=\"text\" id=\"date_received\" name=\"date_received\"\r\n                                        class=\"form-control datepicker form-control-sm\" placeholder=\"Date received\"\r\n                                        required=\"true\" aria-required=\"true\">\r\n                                </div>\r\n                                <div class=\"col\">\r\n                                    <input type=\"text\" id=\"deadline\" name=\"deadline\"\r\n                                        class=\"form-control datepicker form-control-sm\" placeholder=\"Deadline\"\r\n                                        required=\"true\" aria-required=\"true\">\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"row\">\r\n                                <div class=\"col\">\r\n                                    <input\r\n                                        class=\"form-control{{ $errors->has('subject') ? ' is-invalid' : '' }} form-control-sm\"\r\n                                        name=\"subject\" id=\"input-subject\" type=\"text\"\r\n                                        placeholder=\"{{ __('Subject') }}\" required=\"true\" aria-required=\"true\" />\r\n                                    @if ($errors->has('subject'))\r\n                                        <span id=\"name-error\" class=\"error text-danger\"\r\n                                            for=\"input-name\">{{ $errors->first('subject') }}</span>\r\n                                    @endif\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"row\">\r\n                                <div class=\"col\">\r\n                                    <input\r\n                                        class=\"form-control{{ $errors->has('control_number') ? ' is-invalid' : '' }} form-control-sm\"\r\n                                        name=\"control_number\" id=\"input-control_number\" type=\"text\"\r\n                                        placeholder=\"{{ __('Control number') }}\" required=\"true\"\r\n                                        aria-required=\"true\" />\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"row\">\r\n                                <div class=\"col\">\r\n                                    <input placeholder=\"Origin Office\" data-db=\"OriginOffice\" type=\"text\" id=\"origin_id\"\r\n                                        name=\"origin\" class=\"form-control autocomp\" required=\"true\"\r\n                                        aria-required=\"true\">\r\n                                    <input type=\"hidden\" name=\"origin_id\">\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"row\">\r\n                                <div class=\"col\">\r\n                                    <input placeholder=\"Focal\" data-db=\"employee\" type=\"text\" id=\"employee_id\"\r\n                                        name=\"focal\" class=\"form-control autocomp\" required=\"true\" aria-required=\"true\">\r\n                                    <input type=\"hidden\" name=\"employee_id\">\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"row\">\r\n                                <div class=\"col\">\r\n                                    <input placeholder=\"Document Type\" data-db=\"doctype\" type=\"text\" id=\"doctype_id\"\r\n                                        name=\"doctype\" class=\"form-control autocomp\" placeholder=\"\" required=\"true\"\r\n                                        aria-required=\"true\">\r\n                                    <input type=\"hidden\" name=\"doctype_id\">\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"row\">\r\n                                <div class=\"col\">\r\n                                    <input placeholder=\"Means of Receiving\" data-db=\"mor\" type=\"text\" id=\"mor_id\"\r\n                                        name=\"mor\" class=\"form-control autocomp\" required=\"true\" aria-required=\"true\">\r\n                                    <input type=\"hidden\" name=\"mor_id\">\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"col-sm-6\">\r\n                            <div id=\"dropzoneDragArea\"\r\n                                class=\"dz-default dz-message dropzoneDragArea dropzone-previews dropzone\">\r\n                            </div>\r\n                            <button type=\"submit\" class=\"btn btn-md btn-primary float-left\">create</button>\r\n                            <button type=\"button\" class=\"btn btn-secondary float-right\"\r\n                                data-dismiss=\"modal\">Close</button>\r\n                        </div>\r\n                    </div>\r\n\r\n                </form>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</div>\r\n{{-- add new Ducoment modal end --}}\r\n\r\n@push('js')\r\n    <script>\r\n        Dropzone.autoDiscover = false;\r\n        // Dropzone.options.docform = false;\r\n        let token = $('meta[name=\"csrf-token\"]').attr('content');\r\n        $(function() {\r\n            var myDropzone = new Dropzone(\"div#dropzoneDragArea\", {\r\n                paramName: \"file\",\r\n                url: \"{{ route('document.store_file') }}\",\r\n                previewsContainer: 'div.dropzone-previews',\r\n                addRemoveLinks: true,\r\n                autoProcessQueue: false,\r\n                uploadMultiple: false,\r\n                parallelUploads: 1,\r\n                maxFiles: 1,\r\n                params: {\r\n                    _token: token\r\n                },\r\n                // The setting up of the dropzone\r\n                init: function() {\r\n                    var myDropzone = this;\r\n                    //form submission code goes here\r\n                    $(\"form[name='docform']\").submit(function(event) {\r\n                        //Make sure that the form isn't actully being sent.\r\n                        event.preventDefault();\r\n                        URL = $(\"#docform\").attr('action');\r\n                        formData = $('#docform').serialize();\r\n                        $(\"button[type='submit']\").text('Adding...');\r\n\r\n                        $.ajax({\r\n                            type: 'POST',\r\n                            url: URL,\r\n                            data: formData,\r\n                            success: function(result) {\r\n                                \r\n\r\n                                if (result.status == \"success\") {\r\n                                    // fetch the useid\r\n                                    var document_id = result.document_id;\r\n                                    $(\"#document_id\").val(\r\n                                        document_id\r\n                                    ); // inseting document_id into hidden input field\r\n                                    //process the queue\r\n                                    myDropzone.processQueue();\r\n                                } else {\r\n                                    console.log(\"error\");\r\n                                }\r\n                            }\r\n                        });\r\n                    });\r\n                    //Gets triggered when we submit the image.\r\n                    this.on('sending', function(file, xhr, formData) {\r\n                        //fetch the student id from hidden input field and send that studentid with our image\r\n                        let document_id = document.getElementById('document_id').value;\r\n                        formData.append('document_id', document_id);\r\n                    });\r\n                    this.on(\"success\", function(file, response) {\r\n                        console.log(file);\r\n                        console.log(response);\r\n                        Swal.fire(\r\n                            'Added!',\r\n                            'Document Added Successfully!',\r\n                            'success'\r\n                        )\r\n                        fetchAllDocuments();\r\n\r\n                    });\r\n                    this.on(\"queuecomplete\", function() {\r\n                        this.removeAllFiles(true);\r\n                        $(\"button[type='submit']\").text('Add Document');\r\n                        $(\"form[name='docform']\")[0].reset();\r\n                        $(\"#addDocumentModal\").modal('hide');\r\n                    });\r\n                }\r\n            });\r\n        });\r\n    </script>\r\n@endpush\r\n"
        }
    ]
}